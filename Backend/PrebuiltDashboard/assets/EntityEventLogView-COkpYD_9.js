import{d as q,bz as A,h as I,c as u,c5 as w,r as d,e as p,o as m,w as t,j as n,f as l,a as P,m as _,q as c,k as r,t as g,y as h,B as V,_ as F}from"./index-DAyiym1a.js";import{_ as R}from"./EntityEventLogCard.vue_vue_type_script_setup_true_lang-q2_4EzTE.js";import{_ as $,a as B}from"./MViewContainer.vue_vue_type_script_setup_true_lang-DP4T6epC.js";import"./MetaEventStreamCard-BshWTCEs.js";import"./timeUtils-_Yn_3RE3.js";import"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-dEvjQEX9.js";import"./index-TQG-La0y.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import"./MInputText.vue_vue_type_script_setup_true_lang-B9sf9LSD.js";import"./debounce-CRuraxcR.js";import"./isSymbol-BXvDeGRF.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-D6xsoOzq.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-CmGaUCkv.js";import"./apiPoller-B0M_RdYo.js";import"./analyticsEvents-BaCdc4qs.js";import"./keyBy-CW6TLeGB.js";import"./_baseIteratee-CfhjPvCd.js";import"./identity-DKeuBCMA.js";const N={class:"tw-mb-1"},U={key:0},H={class:"tw-mb-1 tw-font-bold"},se=q({__name:"EntityEventLogView",setup(M){const a=A(),o=I(null),y=u(()=>w(a.params.type)),f=u(()=>w(a.params.id)),b=u(()=>a.query.search??""),T=u(()=>{if(a.query.keywords){const i=a.query.keywords;if(typeof i=="string")return decodeURIComponent(i).split(",");if(Array.isArray(i))return i.map(e=>decodeURIComponent(String(e)))}return[]}),k=u(()=>{if(a.query.eventTypes){const i=a.query.eventTypes;if(typeof i=="string")return decodeURIComponent(i).split(",");if(Array.isArray(i))return i.map(e=>decodeURIComponent(String(e)))}return[]});function S(i){o.value=i}return(i,e)=>{const C=d("fa-icon"),s=d("b-td"),v=d("b-tr"),x=d("b-tbody"),E=d("b-table-simple");return m(),p(l(B),null,{overview:t(()=>[n(l($),{title:y.value+" Event Timeline",id:f.value,"data-testid":"overview"},{subtitle:t(()=>[c("p",N,[e[0]||(e[0]=r("A timeline of most recent events for ",-1)),n(l(F),null,{default:t(()=>[r(g(f.value),1)],void 0,!0),_:1}),e[1]||(e[1]=r(".",-1))]),e[2]||(e[2]=c("p",null,"The amount of cached events on this page is limited to keep the database impact small. The full history of events has been sent to your analytics pipeline!",-1))]),default:t(()=>[o.value?(m(),P("div",U,[c("div",H,[n(C,{icon:"chart-line"}),e[3]||(e[3]=r(" Statistics",-1))]),n(E,{small:"",responsive:""},{default:t(()=>[n(x,null,{default:t(()=>[n(v,null,{default:t(()=>[n(s,null,{default:t(()=>e[4]||(e[4]=[r("Total events",-1)]),void 0,!0),_:1,__:[4]}),n(s,{class:"tw-text-right"},{default:t(()=>[r(g(o.value.numEvents),1)],void 0,!0),_:1})],void 0,!0),_:1}),o.value.newestEventTime?(m(),p(v,{key:0},{default:t(()=>[n(s,null,{default:t(()=>e[5]||(e[5]=[r("Most recent event",-1)]),void 0,!0),_:1,__:[5]}),n(s,{class:"tw-text-right"},{default:t(()=>[n(l(h),{instant:o.value.newestEventTime,showAs:"relativeSentenceCase"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})):_("",!0),o.value.oldestEventTime?(m(),p(v,{key:1},{default:t(()=>[n(s,null,{default:t(()=>e[6]||(e[6]=[r("Oldest event",-1)]),void 0,!0),_:1,__:[6]}),n(s,{class:"tw-text-right"},{default:t(()=>[n(l(h),{instant:o.value.oldestEventTime,showAs:"relativeSentenceCase"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})):_("",!0),o.value.duration?(m(),p(v,{key:2},{default:t(()=>[n(s,null,{default:t(()=>e[7]||(e[7]=[r("Range of events",-1)]),void 0,!0),_:1,__:[7]}),n(s,{class:"tw-text-right"},{default:t(()=>[n(l(V),{duration:o.value.duration,showAs:"humanizedSentenceCase"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1})):_("",!0)],void 0,!0),_:1})],void 0,!0),_:1})])):_("",!0)],void 0,!0),_:1},8,["title","id"])]),default:t(()=>[n(R,{class:"h-100",entityKind:y.value,entityId:f.value,searchPreHighlight:String(b.value),keywordPreFilters:T.value,eventTypePreFilters:k.value,utilitiesMode:"highlight",utilitiesCondition:"or",showViewMoreLink:!1,maxHeight:"inherit",onStats:S},null,8,["entityKind","entityId","searchPreHighlight","keywordPreFilters","eventTypePreFilters"])],void 0,!0),_:1})}}});export{se as default};
