import{d as N,bz as U,h as s,D as c,c as k,c5 as V,E as w,K as B,e as E,o as O,w as u,j as n,f as i,q as I,t as g}from"./index-DAyiym1a.js";import{g as P,b as R,_ as j,a as _}from"./MetricCard.vue_vue_type_script_setup_true_lang-CFPMZe7V.js";import{_ as q}from"./MetricsControls.vue_vue_type_script_setup_true_lang-dGnOxw2R.js";import{_ as b}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-CLb4mfLH.js";import{_ as z}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Q1r46_CP.js";import{_ as A,a as F}from"./MViewContainer.vue_vue_type_script_setup_true_lang-DP4T6epC.js";import"./numberUtils-CkF0oMe2.js";import"./MPlot.vue_vue_type_script_setup_true_lang-Bt9zzkvn.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MInputSingleSelectRadio.vue_vue_type_script_setup_true_lang-CGM7lb3s.js";import"./index-TQG-La0y.js";import"./MInputDuration.vue_vue_type_script_setup_true_lang-BgwwwskG.js";import"./MInputNumber.vue_vue_type_script_setup_true_lang-qrqxgTEu.js";import"./index-Byt7eTSs.js";import"./MInputSwitch.vue_vue_type_script_setup_true_lang-BI0IeYnL.js";import"./MInputDateTime.vue_vue_type_script_setup_true_lang-BaxH1mqp.js";import"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-dEvjQEX9.js";const K={class:"tw-mb-2"},G={class:"tw-mb-4 tw-text-sm tw-text-neutral-500"},ct=N({__name:"MetricDetailView",setup(H){const h=U(),d=s("Daily"),p=s(c.utc()),v=s(c.utc().minus({days:60})),l=s(void 0),m=s(void 0),D=s(),o=k(()=>V(h.params.id));async function C(r){l.value=r,await D.value?.selectCohort(r)}function M(){return!a.value||!o.value?"":_(o.value,a.value)?.dashboardInfo?.name??"Metric Name Not Found"}function S(){return!a.value||!o.value?"":_(o.value,a.value)?.dashboardInfo?.purposeDescription??""}function $(){return!a.value||!o.value?"":_(o.value,a.value)?.dashboardInfo?.implementationDescription??""}const{data:a,error:x}=w(()=>P()),{data:y,error:T}=w(()=>{if(o.value)return R(o.value,d.value??"Daily",v.value??c.utc().minus({days:60}),p.value??c.utc())}),f=s();return B([y],([r],[t])=>{r&&(f.value=r)},{immediate:!0}),(r,t)=>(O(),E(i(F),{"full-width":"",permission:"api.metrics.view",error:i(x)||i(T),"is-loading":!i(a)},{overview:u(()=>[n(i(A),{title:M()},{default:u(()=>[I("p",K,g(S()),1),I("p",G,g($()),1),n(q,{ref_key:"metricsControls",ref:D,"metric-id":o.value,"metrics-info-data":i(a),"metric-data":f.value,"onUpdate:startTime":t[0]||(t[0]=e=>v.value=e),"onUpdate:endTime":t[1]||(t[1]=e=>p.value=e),"onUpdate:resolution":t[2]||(t[2]=e=>d.value=e),"onUpdate:selectedCohort":t[3]||(t[3]=e=>l.value=e),"onUpdate:cohortDate":t[4]||(t[4]=e=>m.value=e)},null,8,["metric-id","metrics-info-data","metric-data"])],void 0,!0),_:1},8,["title"])]),default:u(()=>[n(i(b),null,{default:u(()=>[n(j,{class:"tw-max-w-[120rem]","metric-id":o.value,"time-series-resolution":d.value,"start-time":v.value,"end-time":p.value,"cohort-date":m.value,"selected-cohort":l.value,badge:l.value!==void 0?`Cohort D${l.value}`:m.value!==void 0?`Cohorts on ${m.value}`:void 0,"link-mode":"none","hide-description":"",onCohortSelected:t[5]||(t[5]=e=>C(e))},null,8,["metric-id","time-series-resolution","start-time","end-time","cohort-date","selected-cohort","badge"])],void 0,!0),_:1}),n(i(b),null,{default:u(()=>[n(i(z),{class:"tw-max-w-[120rem]",data:f.value,label:"metricsData"},null,8,["data"])],void 0,!0),_:1})]),_:1},8,["error","is-loading"]))}});export{ct as default};
