import{d as h,ab as k,c as r,r as s,e as x,o as i,w as a,j as o,Q as I,a as f,q as l,f as m,T as u,k as v}from"./index-DAyiym1a.js";const y={key:0},C={class:"tw-space-x-1.5 tw-text-right"},L={key:1,class:"mt-5 tw-text-center"},V=h({__name:"GrafanaLinkCard",setup(G){const t=k(),n=r(()=>!!t.environmentInfo.grafanaUri),p=r(()=>{if(n.value&&t)return t.environmentInfo.grafanaUri+"/d/rCI05Y4Mz/metaplay-server"}),_=r(()=>{if(n.value&&t){const d=t.environmentInfo.kubernetesNamespace?`,namespace=\\"${t.environmentInfo.kubernetesNamespace}\\"`:"";return`${t.environmentInfo.grafanaUri}/explore?orgId=1&left={"datasource": "Loki", "queries":[{"expr":"{app=\\"metaplay-server\\"${d}}"}],"range":{"from":"now-1h","to":"now"}}`}else return});return(d,e)=>{const c=s("fa-icon"),g=s("b-card"),w=s("b-col"),b=s("b-row");return i(),x(b,{class:"justify-content-center"},{default:a(()=>[o(w,{lg:"9",xl:"8"},{default:a(()=>[o(g,{class:I(["shadow-sm tw-mb-4",n.value?"":"bg-light"]),title:"Cluster Metrics & Logs",style:{"min-height":"11rem"},"data-testid":"grafana-card"},{default:a(()=>[n.value?(i(),f("div",y,[e[2]||(e[2]=l("p",null,'Grafana is an industry standard tool for diving into the "engine room" level system health metrics and server logs.',-1)),l("div",C,[o(m(u),{permission:"dashboard.grafana.view",to:p.value,"disabled-tooltip":n.value?void 0:"Grafana has not been configured for this environment."},{icon:a(()=>[o(c,{class:"tw-mr-1 tw-h-3.5 tw-w-4",icon:"external-link-alt"})]),default:a(()=>[e[0]||(e[0]=v("View Metrics",-1))],void 0,!0),_:1,__:[0]},8,["to","disabled-tooltip"]),o(m(u),{permission:"dashboard.grafana.view",to:_.value,"disabled-tooltip":n.value?void 0:"Grafana has not been configured for this environment."},{icon:a(()=>[o(c,{class:"tw-mr-1 tw-h-3.5 tw-w-4",icon:"external-link-alt"})]),default:a(()=>[e[1]||(e[1]=v("View Logs",-1))],void 0,!0),_:1,__:[1]},8,["to","disabled-tooltip"])])])):(i(),f("div",L,e[3]||(e[3]=[l("div",{class:"text-muted"},"Grafana has not been configured for this environment.",-1)])))],void 0,!0),_:1},8,["class"])],void 0,!0),_:1})],void 0,!0),_:1})}}});export{V as default};
