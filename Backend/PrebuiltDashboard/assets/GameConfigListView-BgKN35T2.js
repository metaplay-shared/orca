import{d as G,E as k,c9 as $,c as l,b7 as S,e as u,o as m,w as t,j as s,f as i,q as o,m as d,a6 as h,t as c,ad as N,a as P,k as g,ae as U,bs as V,bt as T}from"./index-DAyiym1a.js";import{C as x}from"./CoreUiPlacement-Q0Nbc6Vr.js";import{_ as B}from"./GameConfigBuildModal.vue_vue_type_script_setup_true_lang-CX6zNMq-.js";import{_ as D}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Q1r46_CP.js";import{_ as M,a as Y}from"./MViewContainer.vue_vue_type_script_setup_true_lang-DP4T6epC.js";import{_ as E}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CRnsCPt_.js";import"./MetaGeneratedForm.vue_vue_type_script_setup_true_lang-DdaVgxEJ.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-BiTvhFwY.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-D6xsoOzq.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-CmGaUCkv.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import"./MInputText.vue_vue_type_script_setup_true_lang-B9sf9LSD.js";import"./debounce-CRuraxcR.js";import"./isSymbol-BXvDeGRF.js";import"./MInputTextArea.vue_vue_type_script_setup_true_lang-Dxjs9C9J.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-XDUxofmt.js";import"./index-CVSO09yM.js";const j={class:"tw-mt-4 tw-flex tw-justify-end"},q={class:"tw-mb-3"},I={key:0},re=G({__name:"GameConfigListView",setup(L){const b=V(),_=S(),{data:n,error:w}=k($()),{showSuccessNotification:C}=T(),r=l(()=>(n.value??[]).filter(a=>!a.isArchived&&!(a.publishedAt!==null||a.unpublishedAt!==null||a.isActive)).map(a=>a.id)),f=l(()=>r.value.length>100);async function A(){await b.post("/gameConfig/archive",r.value),C(`Archived ${r.value.length} unpublished game configs.`)}const v=l(()=>{if(n.value)return n.value.reduce((a,e)=>e.isArchived?a+1:a,0)}),p=l(()=>(v.value??0)>200),y=l(()=>_.doesHavePermission("api.game_config.delete"));return(a,e)=>(m(),u(i(Y),{"is-loading":!i(n),error:i(w),variant:f.value||p.value?"warning":void 0,permission:"api.game_config.view"},{alerts:t(()=>[f.value?(m(),u(i(h),{key:0,class:"tw-mb-3",title:"Many Unpublished Game Configs",variant:"warning"},{default:t(()=>[o("div",null,"You have "+c(i(N)(r.value.length,"unpublished game config",!0))+". Consider archiving or publishing them to reduce clutter.",1),o("div",j,[s(i(E),{"modal-title":"Archive All Unpublished Game Configs",action:A,"trigger-button-label":"Archive All Unpublished","trigger-button-size":"small"},{default:t(()=>[o("div",null,"You are about to archive "+c(r.value.length)+" unpublished game configs. Archiving a game config will hide it from the list of available game configs. An archived game config can be unarchived at any time.",1)]),_:1})])],void 0,!0),_:1})):d("",!0),p.value?(m(),u(i(h),{key:1,title:"Many Archived Game Configs",variant:"warning"},{default:t(()=>[o("div",q,"You have "+c(v.value)+" archived game configs. These configs are not being used and can be safely removed. Removing these configs will improve your server performance.",1),y.value?(m(),P("div",I,[e[1]||(e[1]=g("Archived game configs can be removed from the ",-1)),s(i(U),{to:"/system"},{default:t(()=>e[0]||(e[0]=[g("settings",-1)]),void 0,!0),_:1,__:[0]}),e[2]||(e[2]=g(" page.",-1))])):d("",!0)],void 0,!0),_:1})):d("",!0)]),overview:t(()=>[s(i(M),{title:"View Game Configs","data-testid":"game-config-list-overview-card"},{buttons:t(()=>[s(B)]),default:t(()=>[e[3]||(e[3]=o("p",{class:"tw-mb-1"},"Game configs contain all your game data, such as the economy balancing.",-1)),e[4]||(e[4]=o("div",{class:"tw-text-sm tw-text-neutral-500"},"You can make new game configs builds and review them before publishing. Published game configs will be delivered over-the-air and do not require players to update their clients.",-1))],void 0,!0),_:1,__:[3,4]})]),default:t(()=>[s(x,{placementId:"GameConfigs/List"}),s(i(D),{data:i(n),label:"allGameConfigsData"},null,8,["data"])]),_:1},8,["is-loading","error","variant"]))}});export{re as default};
