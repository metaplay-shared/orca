import{d as b,E as w,c as M,D as m,A as T,r as O,e as A,o as c,w as i,j as o,f as a,x as C,k as r,t as d,q as l,y as f,a as L,m as D,ae as h}from"./index-DAyiym1a.js";import{M as u,a as v,b as k,c as p}from"./metaListUtils-B-xQ0HnD.js";import{a as V}from"./guilds-CXgIPAfk.js";const B={key:0},j=b({__name:"GuildInviteListCard",props:{guildId:{}},setup(g){const _=g,{data:y}=w(V(_.guildId)),I=["inviteCode","playerId"],S=[u.asUnsorted(),new u("Player","playerId",v.Ascending),new u("Player","playerId",v.Descending)],U=M(()=>{const e=[];for(const t of Object.values(y.value.model.members))for(const n of Object.values(t.invites))e.push({...n,playerId:t.id,expiresAt:m.fromISO(n.createdAt).plus(T(n.expiresAfter))});return e}),x=[new k("usage",[new p("Unused",e=>e.numTimesUsed===0),new p("Part used",e=>e.numTimesUsed>0&&e.numTimesUsed<e.numMaxUsages),new p("Fully used",e=>e.numTimesUsed===e.numMaxUsages)])];return(e,t)=>{const n=O("meta-list-card");return c(),A(n,{id:"guild-member-list-card",title:"Invites",icon:"people-arrows",tooltip:"A list of invites that are currently active for this guild.",itemList:U.value,searchFields:I,sortOptions:S,filterSets:x,emptyMessage:"This guild has no active invites!"},{"item-card":i(s=>[o(a(C),null,{"top-right":i(()=>[o(a(h),{to:`/players/${s.item.playerId}`},{default:i(()=>t[0]||(t[0]=[r("View player",-1)]),void 0,!0),_:2,__:[0]},1032,["to"])]),"bottom-left":i(()=>[l("span",null,[r("Used: "+d(s.item.numTimesUsed)+" ",1),s.item.numMaxUsages>0?(c(),L("span",B,"/"+d(s.item.numMaxUsages),1)):D("",!0)])]),"bottom-right":i(()=>[l("div",null,[t[1]||(t[1]=r("Created: ",-1)),o(a(f),{instant:a(m).fromISO(s.item.createdAt)},null,8,["instant"])]),l("div",null,[t[2]||(t[2]=r("Expires: ",-1)),o(a(f),{instant:a(m).fromISO(s.item.expiresAt)},null,8,["instant"])])]),default:i(()=>[r(d(s.item.inviteCode),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}}});export{j as default};
