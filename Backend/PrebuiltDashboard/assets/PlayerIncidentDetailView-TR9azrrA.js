import{br as X,bp as tt,bA as et,d as M,h as B,i as z,c6 as J,e as m,m as x,o as l,f as e,ah as N,w as o,a as d,q as t,t as r,E as V,c as k,D as A,ad as K,I as nt,j as g,F as D,b as C,Q as R,bj as st,_ as S,k as _,v as j,x as H,A as U,z as Q,bg as lt,bz as rt,c5 as Y,r as it,y as G,ae as ot,T as at,a6 as Z,by as dt}from"./index-DAyiym1a.js";import{_ as ut}from"./MetaGeneratedContent.vue_vue_type_script_setup_true_lang-DR9f3Dqo.js";import{a as ct}from"./timeUtils-_Yn_3RE3.js";import{_ as pt}from"./MInputSwitch.vue_vue_type_script_setup_true_lang-BI0IeYnL.js";import{_ as mt}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-CLb4mfLH.js";import{C as ft}from"./CoreUiPlacement-Q0Nbc6Vr.js";import{_ as vt}from"./MTabLayout.vue_vue_type_script_setup_true_lang-xoFAviVR.js";import{_ as wt}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Q1r46_CP.js";import{_ as yt,a as It}from"./MViewContainer.vue_vue_type_script_setup_true_lang-DP4T6epC.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import"./MSingleColumnLayout-CUJDqBPP.js";function O(h,f){return{permission:"api.incident_reports.view",pollingPolicy:et(),fetcherPolicy:tt(`/players/${h}/incidentReport/${f}`),cacheRetentionPolicy:X(1e4)}}const gt={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},_t={key:1,class:"tw-w-full"},xt={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},ht={class:"tw-text-right"},bt={class:"tw-text-right"},St={key:0,class:"text-right text-muted"},$t={key:1,class:"tw-text-right"},kt={class:"tw-text-right"},Pt={class:"tw-text-right"},Dt={class:"tw-text-right"},Tt=M({__name:"IncidentClientApplicationInfo",props:{incidentId:{},playerId:{}},setup(h){const f=h,s=B();return z(()=>{J(O(f.playerId,f.incidentId)).then(a=>{s.value=a}).catch(a=>{throw a instanceof Error?new Error(`Failed to load data from the server! Reason: ${a.message}.`):new Error(`Failed to load data from the server! Reason: ${JSON.stringify(a)}.`)})}),(a,n)=>s.value?(l(),m(e(N),{key:0,title:"Client Application Info",variant:s.value.applicationInfo?"primary":"neutral"},{default:o(()=>[s.value.applicationInfo?(l(),d("table",_t,[t("tbody",xt,[t("tr",null,[n[0]||(n[0]=t("td",null,"Application Version",-1)),t("td",ht,r(s.value.applicationInfo.buildVersion.version),1)]),t("tr",null,[n[1]||(n[1]=t("td",null,"Build Number",-1)),t("td",bt,r(s.value.applicationInfo.buildVersion.buildNumber),1)]),t("tr",null,[n[2]||(n[2]=t("td",null,"Commit ID",-1)),s.value.applicationInfo.buildVersion.commitId?(l(),d("td",$t,r(s.value.applicationInfo.buildVersion.commitId),1)):(l(),d("td",St,"Not available"))]),t("tr",null,[n[3]||(n[3]=t("td",null,"Device GUID",-1)),t("td",kt,r(s.value.applicationInfo.deviceGuid),1)]),t("tr",null,[n[4]||(n[4]=t("td",null,"Active Language",-1)),t("td",Pt,r(s.value.applicationInfo.activeLanguage),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Highest Supported Logic Version",-1)),t("td",Dt,r(s.value.applicationInfo.highestSupportedLogicVersion),1)])])])):(l(),d("p",gt,"Application information not included in this incident report."))],void 0,!0),_:1},8,["variant"])):x("",!0)}}),Et={key:0},Ct={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},Rt={key:1,class:"log border rounded bg-light tw-w-full",style:{"max-height":"30rem"}},Nt={class:"text-muted"},Mt={key:0},Ot={key:2,class:"ml-5"},Ft={key:1,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},At=M({__name:"IncidentClientLogs",props:{incidentId:{},playerId:{}},setup(h){const f=h,{data:s}=V(O(f.playerId,f.incidentId)),a=B(!0);k(()=>s.value?.clientLogEntries.map(w=>{const I=A.fromISO(w.timestamp).toFormat("HH:mm:ss"),p=w.level;let i;a.value?i=E(w.message,{enableColor:!1}).map(y=>y.text).join(""):i=w.message;const u=w.stackTrace?`
`+w.stackTrace:"";return`${I} ${p}: ${i}${u}`.trimEnd()}).join(`
`));const n=k(()=>(s.value?.clientLogEntries??[]).reduce((I,p)=>I+(p.level==="Warning"?1:0),0)),v=k(()=>(s.value?.clientLogEntries??[]).reduce((I,p)=>I+(p.level==="Exception"||p.level==="Error"?1:0),0));function P(w){return w.level==="Warning"?"text-warning":w.level==="Exception"||w.level==="Error"?"text-danger":""}const T=[{open:/<color=(#[0-9a-fA-F]+|[a-zA-Z]+)>/,close:/<\/color>/,getStyle:w=>({color:w[1]})},{open:/<b>/,close:/<\/b>/,getStyle:w=>({"font-weight":"bold"})},{open:/<i>/,close:/<\/i>/,getStyle:w=>({"font-style":"italic"})}];function E(w,I){const p=[],i={},u=[];let c=w;for(;;){let y=null;for(const F of T){const L=F.open.exec(c);L&&(!y||L.index<y.match.index)&&(y={match:L,elementSpec:F})}let b=null;if(p.length!==0){const F=p[p.length-1].elementSpec,L=F.close.exec(c);L&&(b={match:L,elementSpec:F})}let $;y&&b?$=y.match.index<b.match.index?y:b:$=y??b;const q=$?$.match.index:c.length,W=p.length===0?i:p[p.length-1].accumulatedStyle;if(q!==0&&u.push({text:c.slice(0,q),style:W}),!$)break;if($===y){const F={...W,...y.elementSpec.getStyle(y.match)};I.enableColor||delete F.color,p.push({elementSpec:y.elementSpec,accumulatedStyle:F})}else p.pop();c=c.slice($.match.index+$.match[0].length)}return u}return(w,I)=>(l(),m(e(N),{variant:e(s)?.clientLogEntries?"primary":"neutral",title:"Client Logs",badge:v.value>0?e(K)(v.value,"error",!0):n.value>0?e(K)(n.value,"warning",!0):void 0,"badge-variant":v.value>0?"danger":n.value>0?"warning":void 0},nt({default:o(()=>[e(s)?.clientLogEntries?(l(),d("div",Et,[!e(s).clientLogEntries||e(s).clientLogEntries.length===0?(l(),d("p",Ct,"Client logs not included in this incident report.")):(l(),d("pre",Rt,[(l(!0),d(D,null,C(e(s).clientLogEntries,(p,i)=>(l(),d("div",{class:"tw-m-0 tw-space-x-1",key:i},[t("span",Nt,r(e(ct)(p.timestamp)),1),t("span",{class:R(P(p))},r(p.level)+":",3),a.value?(l(),d("span",Mt,[(l(!0),d(D,null,C(E(p.message,{enableColor:!1}),u=>(l(),d("span",{style:st(u.style),class:R(P(p))},r(u.text),7))),256))])):(l(),d("span",{key:1,class:R(P(p))},r(p.message),3)),p.stackTrace?(l(),d("div",Ot,[t("span",null,r(p.stackTrace),1)])):x("",!0)]))),128))]))])):(l(),d("div",Ft,"No client logs available for this incident."))],void 0,!0),_:2},[e(s)?.clientLogEntries?{name:"header-right",fn:o(()=>[g(e(pt),{class:"tw-text-xs+","model-value":a.value,label:"Rich Text Styling",name:"richTextStylingEnabled",size:"extraSmall","onUpdate:modelValue":I[0]||(I[0]=p=>a.value=p)},null,8,["model-value"])]),key:"0"}:void 0]),1032,["variant","badge","badge-variant"]))}}),Lt={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},Vt={key:1,class:"tw-w-full"},Gt={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},Bt={class:"tw-text-right"},Ht={class:"tw-text-right"},Ut={class:"tw-text-right"},jt={class:"tw-text-right"},zt={class:"tw-text-right"},Jt={class:"tw-text-right"},qt={class:"tw-text-right"},Wt={class:"tw-text-right"},Kt={class:"tw-text-right"},Qt=M({__name:"IncidentClientPlatformInfo",props:{incidentId:{},playerId:{}},setup(h){const f=h,{data:s}=V(O(f.playerId,f.incidentId));return(a,n)=>e(s)?(l(),m(e(N),{key:0,title:"Client Platform Info",variant:e(s).clientPlatformInfo?"primary":"neutral"},{default:o(()=>[e(s).clientPlatformInfo?(l(),d("table",Vt,[t("tbody",Gt,[t("tr",null,[n[0]||(n[0]=t("td",null,"Build GUID",-1)),t("td",Bt,r(e(s).clientPlatformInfo.buildGuid),1)]),t("tr",null,[n[1]||(n[1]=t("td",null,"Platform",-1)),t("td",Ht,r(e(s).clientPlatformInfo.platform),1)]),t("tr",null,[n[2]||(n[2]=t("td",null,"Internet Reachability",-1)),t("td",Ut,r(e(s).clientPlatformInfo.internetReachability),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Is Editor",-1)),t("td",jt,[e(s).clientPlatformInfo.isEditor?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>n[3]||(n[3]=[_("True",-1)]),void 0,!0),_:1,__:[3]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>n[4]||(n[4]=[_("False",-1)]),void 0,!0),_:1,__:[4]}))])]),t("tr",null,[n[6]||(n[6]=t("td",null,"Application Version",-1)),t("td",zt,r(e(s).clientPlatformInfo.applicationVersion),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Unity Version",-1)),t("td",Jt,r(e(s).clientPlatformInfo.unityVersion),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"System Language",-1)),t("td",qt,r(e(s).clientPlatformInfo.systemLanguage),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Install Mode",-1)),t("td",Wt,r(e(s).clientPlatformInfo.installMode),1)]),t("tr",null,[n[12]||(n[12]=t("td",null,"Is Genuine",-1)),t("td",Kt,[e(s).clientPlatformInfo.isGenuine?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>n[10]||(n[10]=[_("True",-1)]),void 0,!0),_:1,__:[10]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>n[11]||(n[11]=[_("False",-1)]),void 0,!0),_:1,__:[11]}))])])])])):(l(),d("p",Lt,"Client Platform Info not included in this incident report."))],void 0,!0),_:1},8,["variant"])):x("",!0)}}),Yt={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},Zt={key:1,class:"tw-w-full"},Xt={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},te={class:"tw-text-right"},ee={class:"tw-text-right"},ne={class:"tw-text-right"},se={class:"tw-text-right"},le={class:"tw-text-right"},re={class:"tw-text-right"},ie={class:"tw-text-right"},oe={class:"tw-text-right"},ae={class:"tw-text-right"},de={class:"tw-text-right"},ue={class:"tw-text-right"},ce={class:"tw-text-right"},pe={class:"tw-text-right"},me={class:"tw-text-right"},fe={class:"tw-text-right"},ve={class:"tw-text-right"},we={class:"tw-text-right"},ye={class:"tw-text-right"},Ie={class:"tw-text-right"},ge={class:"tw-text-right"},_e={class:"tw-text-right"},xe=M({__name:"IncidentClientSystemInfo",props:{incidentId:{},playerId:{}},setup(h){const f=h,{data:s}=V(O(f.playerId,f.incidentId));return(a,n)=>e(s)?(l(),m(e(N),{key:0,title:"Client System Info",variant:e(s).clientSystemInfo?"primary":"neutral"},{default:o(()=>[e(s).clientSystemInfo?(l(),d("table",Zt,[t("tbody",Xt,[t("tr",null,[n[0]||(n[0]=t("td",null,"Battery Level",-1)),t("td",te,r(e(s).clientSystemInfo.batteryLevel),1)]),t("tr",null,[n[1]||(n[1]=t("td",null,"Device Model",-1)),t("td",ee,r(e(s).clientSystemInfo.deviceModel),1)]),t("tr",null,[n[2]||(n[2]=t("td",null,"Device Type",-1)),t("td",ne,r(e(s).clientSystemInfo.deviceType),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"Graphics Device ID",-1)),t("td",se,r(e(s).clientSystemInfo.graphicsDeviceId),1)]),t("tr",null,[n[4]||(n[4]=t("td",null,"Graphics Device Name",-1)),t("td",le,r(e(s).clientSystemInfo.graphicsDeviceName),1)]),t("tr",null,[n[5]||(n[5]=t("td",null,"Graphics Device Type",-1)),t("td",re,r(e(s).clientSystemInfo.graphicsDeviceType),1)]),t("tr",null,[n[6]||(n[6]=t("td",null,"Graphics Device Vendor",-1)),t("td",ie,r(e(s).clientSystemInfo.graphicsDeviceVendor),1)]),t("tr",null,[n[7]||(n[7]=t("td",null,"Graphics Device Vendor ID",-1)),t("td",oe,r(e(s).clientSystemInfo.graphicsDeviceVendorId),1)]),t("tr",null,[n[8]||(n[8]=t("td",null,"Graphics Device Version",-1)),t("td",ae,r(e(s).clientSystemInfo.graphicsDeviceVersion),1)]),t("tr",null,[n[9]||(n[9]=t("td",null,"Graphics Device Memory In Megabytes",-1)),t("td",de,r(e(s).clientSystemInfo.graphicsDeviceMemoryMegabytes),1)]),t("tr",null,[n[10]||(n[10]=t("td",null,"Operating System",-1)),t("td",ue,r(e(s).clientSystemInfo.operatingSystem),1)]),t("tr",null,[n[11]||(n[11]=t("td",null,"Operating System Family",-1)),t("td",ce,r(e(s).clientSystemInfo.operatingSystemFamily),1)]),t("tr",null,[n[12]||(n[12]=t("td",null,"Processor Count",-1)),t("td",pe,r(e(s).clientSystemInfo.processorCount),1)]),t("tr",null,[n[13]||(n[13]=t("td",null,"Processor Frequency Mhz",-1)),t("td",me,r(e(s).clientSystemInfo.processorFrequencyMhz),1)]),t("tr",null,[n[14]||(n[14]=t("td",null,"Processor Type",-1)),t("td",fe,r(e(s).clientSystemInfo.processorType),1)]),t("tr",null,[n[15]||(n[15]=t("td",null,"System Memory Megabytes",-1)),t("td",ve,r(e(s).clientSystemInfo.systemMemoryMegabytes),1)]),t("tr",null,[n[16]||(n[16]=t("td",null,"Screen Width",-1)),t("td",we,r(e(s).clientSystemInfo.screenWidth),1)]),t("tr",null,[n[17]||(n[17]=t("td",null,"Screen Height",-1)),t("td",ye,r(e(s).clientSystemInfo.screenHeight),1)]),t("tr",null,[n[18]||(n[18]=t("td",null,"Screen DPI",-1)),t("td",Ie,r(e(s).clientSystemInfo.screenDPI),1)]),t("tr",null,[n[19]||(n[19]=t("td",null,"Screen Orientation",-1)),t("td",ge,r(e(s).clientSystemInfo.screenOrientation),1)]),t("tr",null,[n[22]||(n[22]=t("td",null,"Is Full Screen",-1)),t("td",_e,[e(s).clientSystemInfo.isFullScreen?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>n[20]||(n[20]=[_("True",-1)]),void 0,!0),_:1,__:[20]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>n[21]||(n[21]=[_("False",-1)]),void 0,!0),_:1,__:[21]}))])])])])):(l(),d("p",Yt,"Client System Info not included in this incident report."))],void 0,!0),_:1},8,["variant"])):x("",!0)}}),he={key:0,class:"log tw-w-full tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-100",style:{"max-height":"30rem"}},be={key:1,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},Se=M({__name:"IncidentDiffReport",props:{incidentId:{},playerId:{}},setup(h){const f=h,s=B();return z(()=>{J(O(f.playerId,f.incidentId)).then(a=>{s.value=a}).catch(a=>{throw a instanceof Error?new Error(`Failed to load data from the server! Reason: ${a.message}.`):new Error(`Failed to load data from the server! Reason: ${JSON.stringify(a)}.`)})}),(a,n)=>(l(),m(e(N),{variant:s.value?.playerModelDiffReport?"primary":"neutral","is-loading":!s.value,title:"Player Model Desync Report",subtitle:s.value?.type==="PlayerChecksumMismatch"&&s.value?.playerModelDiffReport?"The client and server models got out of sync. This is the raw output of the resulting diff.":void 0},{default:o(()=>[s.value?.playerModelDiffReport?.playerModelDiff?(l(),d("pre",he,[t("span",null,r(s.value.playerModelDiffReport.playerModelDiff),1)])):(l(),d("p",be,"No player model desync report included in this incident report."))],void 0,!0),_:1},8,["variant","is-loading","subtitle"]))}}),$e={class:"tw-relative tw-top-0.5 tw-text-xs+ tw-text-neutral-500"},ke={key:0,class:"tw-mt-1 tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-50 tw-p-2"},Pe={key:0},De={class:"tw-text-neutral-400"},Te={key:0,class:"tw-text-xs tw-text-red-500"},Ee={key:1,class:"tw-text-xs+ tw-italic tw-text-red-500"},Ce={class:"tw-relative tw-top-0.5 tw-text-xs+ tw-text-neutral-500"},Re={key:0,class:"tw-mt-1 tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-50 tw-p-2"},Ne={class:"tw-text-xs tw-text-red-500"},Me={class:"tw-text-red-500"},Oe={key:3,class:"tw-text-xs+ tw-italic tw-text-red-500"},Fe={class:"tw-relative tw-top-0.5 tw-text-xs+ tw-text-neutral-500"},Ae={key:0,class:"tw-mt-1 tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-50 tw-p-2"},Le={class:"tw-text-neutral-400"},Ve={key:0,class:"tw-text-xs tw-text-red-500"},Ge={key:1,class:"tw-text-xs+ tw-italic tw-text-red-500"},Be=M({__name:"NetworkDiagnosticReport",props:{incidentId:{},playerId:{}},setup(h){const f=h,{data:s}=V(O(f.playerId,f.incidentId)),a=s.value?.networkReport,n=k(()=>a?[...T(a.gameServerIPv4),...T(a.gameServerIPv6),...E(a.gameServerIPv4),...E(a.gameServerIPv6)]:[]),v=k(()=>a?[{name:"CDN IPv4",result:a.gameCdnSocketIPv4},{name:"Google.com IPv4",result:a.googleComIPv4},{name:"Microsoft.com IPv4",result:a.microsoftComIPv4},{name:"Apple.com IPv4",result:a.appleComIPv4},{name:"CDN IPv6",result:a.gameCdnSocketIPv6},{name:"Google.com IPv6",result:a.googleComIPv6},{name:"Microsoft.com IPv6",result:a.microsoftComIPv6},{name:"Apple.com IPv6",result:a.appleComIPv6}]:[]),P=k(()=>a?[{name:"CDN IPv4",result:a.gameCdnHttpIPv4},{name:"CDN IPv6",result:a.gameCdnHttpIPv6}]:[]);function T(i){if(i.legacyHostname&&i.legacyGatewaysByPort){const u=[];for(const c of Object.keys(i.legacyGatewaysByPort))u.push([`${i.legacyHostname}:${c}`,i.legacyGatewaysByPort[c]]);return u}return[]}function E(i){if(i.gatewaysByHost){const u=[];for(const c of Object.keys(i.gatewaysByHost))u.push([c,i.gatewaysByHost[c]]);return u}return[]}function w(i){return Q.fromISO(i).as("milliseconds")+"ms"}function I(i){let u=!0;for(const c in i)i[c]?.isSuccess===!1&&(u=!1);return u}function p(i){let u=Q.fromMillis(0);for(const c in i)if(i[c]?.elapsed){const y=U(i[c].elapsed);y>u&&(u=y)}return u}return(i,u)=>e(s)&&e(s).networkReport?(l(),m(e(mt),{key:0},{default:o(()=>[t("div",null,[u[5]||(u[5]=t("h6",{class:"tw-mb-1"},"Game Server Probes",-1)),n.value&&n.value.length>0?(l(),m(e(j),{key:0,showBorder:""},{default:o(()=>[t("div",null,[(l(!0),d(D,null,C(n.value,([c,y])=>(l(),m(e(H),{class:"tw-px-3",key:c},{badge:o(()=>[t("span",$e,r(w(p(y))),1)]),"top-right":o(()=>[I(y)?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>u[0]||(u[0]=[_("Success",-1)]),void 0,!0),_:1,__:[0]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>u[1]||(u[1]=[_("Failed",-1)]),void 0,!0),_:1,__:[1]}))]),"bottom-left":o(()=>[I(y)?x("",!0):(l(),d("pre",ke,[(l(!0),d(D,null,C(y,(b,$)=>(l(),d("div",{key:$},[b&&typeof b=="object"?(l(),d("pre",Pe,[t("div",{class:R(b.isSuccess?"tw-text-xs text-success":"tw-text-xs tw-text-red-500")},[_(r($)+" ",1),t("span",De,r(w(e(U)(b.elapsed))),1)],2),b.isSuccess?x("",!0):(l(),d("div",Te,"Error: "+r(b.error),1))])):x("",!0)]))),128))]))]),default:o(()=>[t("div",{class:R(I(y)?"":"tw-text-red-500")},r(c),3)],void 0,!0),_:2},1024))),128))])],void 0,!0),_:1})):(l(),d("div",Ee,"Data unavailable for this probe.")),u[6]||(u[6]=t("h6",{class:"tw-mb-1 tw-mt-4"},"HTTP Probes",-1)),P.value&&P.value.length>0?(l(),m(e(j),{key:2,showBorder:""},{default:o(()=>[(l(!0),d(D,null,C(P.value,c=>(l(),d("div",{key:c.name},[c.result!==null&&c.result.status!==null?(l(),m(e(H),{key:0,class:"tw-px-3"},{badge:o(()=>[t("span",Ce,r(w(e(U)(c.result.status.elapsed))),1)]),"top-right":o(()=>[c.result.status.isSuccess?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>u[2]||(u[2]=[_("Success",-1)]),void 0,!0),_:1,__:[2]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>u[3]||(u[3]=[_("Failed",-1)]),void 0,!0),_:1,__:[3]}))]),"bottom-left":o(()=>[c.result.status.isSuccess?x("",!0):(l(),d("pre",Re,[t("span",Ne,r(c.result.status.error),1)]))]),default:o(()=>[t("span",{class:R(c.result.status.isSuccess?"":"tw-text-red-500")},r(c.name),3)],void 0,!0),_:2},1024)):(l(),m(e(H),{key:1,class:"tw-px-3"},{"top-right":o(()=>[g(e(S),{variant:"danger"},{default:o(()=>u[4]||(u[4]=[_("No data",-1)]),void 0,!0),_:1,__:[4]})]),default:o(()=>[t("span",Me,r(c.name),1)],void 0,!0),_:2},1024))]))),128))],void 0,!0),_:1})):(l(),d("div",Oe,"Data unavailable for this probe."))]),t("div",null,[u[9]||(u[9]=t("h6",{class:"tw-mb-1"},"Internet Probes",-1)),v.value&&v.value.length>0?(l(),m(e(j),{key:0,showBorder:""},{default:o(()=>[(l(!0),d(D,null,C(v.value,c=>(l(),m(e(H),{class:"tw-px-3",key:c.name},{badge:o(()=>[t("span",Fe,r(w(p(c.result))),1)]),"top-right":o(()=>[I(c.result)?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>u[7]||(u[7]=[_("Success",-1)]),void 0,!0),_:1,__:[7]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>u[8]||(u[8]=[_("Failed",-1)]),void 0,!0),_:1,__:[8]}))]),"bottom-left":o(()=>[I(c.result)?x("",!0):(l(),d("pre",Ae,[(l(!0),d(D,null,C(c.result,(y,b)=>(l(),d(D,{key:b},[y&&String(b)!=="$type"?(l(),d("div",{key:0,class:R(y.isSuccess?"text-success tw-text-xs":"tw-text-red-500 tw-text-xs")},[_(r(b)+" ",1),t("span",Le,r(w(e(U)(y.elapsed))),1),y.isSuccess?x("",!0):(l(),d("div",Ve,"Error: "+r(y.error),1))],2)):x("",!0)],64))),128))]))]),default:o(()=>[t("span",{class:R(I(c.result)?"":"tw-text-red-500")},r(c.name),3)],void 0,!0),_:2},1024))),128))],void 0,!0),_:1})):(l(),d("div",Ge,"Data unavailable for this probe."))])],void 0,!0),_:1})):x("",!0)}}),He={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},Ue={key:1},je={class:"tw-mb-4 tw-w-full"},ze={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},Je={class:"tw-text-right"},qe={class:"tw-text-right"},We={class:"tw-text-right"},Ke={class:"tw-text-right"},Qe={class:"tw-text-right"},Ye={class:"tw-text-right"},Ze={class:"tw-text-right"},Xe=M({__name:"IncidentNetworkStatus",props:{incidentId:{},playerId:{}},setup(h){const f=h,s=B();z(()=>{J(O(f.playerId,f.incidentId)).then(n=>{s.value=n}).catch(n=>{throw n instanceof Error?new Error(`Failed to load data from the server! Reason: ${n.message}.`):new Error(`Failed to load data from the server! Reason: ${JSON.stringify(n)}.`)})});const a=k(()=>!!s.value?.networkInfo);return(n,v)=>s.value?(l(),m(e(N),{key:0,title:"Network Status",variant:a.value?"primary":"neutral"},{default:o(()=>[a.value?x("",!0):(l(),d("p",He,"Network information not included in this incident report.")),s.value.networkInfo?(l(),d("div",Ue,[t("table",je,[t("tbody",ze,[t("tr",null,[v[0]||(v[0]=t("td",null,"Error",-1)),t("td",Je,r(s.value.subType),1)]),t("tr",null,[v[1]||(v[1]=t("td",null,"Reachability",-1)),t("td",qe,r(s.value.networkInfo.networkReachability),1)]),t("tr",null,[v[2]||(v[2]=t("td",null,"Server Host",-1)),t("td",We,r(s.value.networkInfo.serverHost),1)]),t("tr",null,[v[3]||(v[3]=t("td",null,"Server Port",-1)),t("td",Ke,r(s.value.networkInfo.serverPort),1)]),t("tr",null,[v[6]||(v[6]=t("td",null,"Enable TLS",-1)),t("td",Qe,[s.value.networkInfo.enableTls?(l(),m(e(S),{key:0,variant:"success"},{default:o(()=>v[4]||(v[4]=[_("True",-1)]),void 0,!0),_:1,__:[4]})):(l(),m(e(S),{key:1,variant:"danger"},{default:o(()=>v[5]||(v[5]=[_("False",-1)]),void 0,!0),_:1,__:[5]}))])]),t("tr",null,[v[7]||(v[7]=t("td",null,"CDN Base URL",-1)),t("td",Ye,r(s.value.networkInfo.cdnBaseUrl),1)]),t("tr",null,[v[8]||(v[8]=t("td",null,"TLS Peer",-1)),t("td",Ze,r(s.value.networkInfo.tlsPeerDescription),1)])])])])):x("",!0),g(Be,{incidentId:n.incidentId,playerId:n.playerId},null,8,["incidentId","playerId"])],void 0,!0),_:1},8,["variant"])):x("",!0)}}),tn=lt(Xe,[["__scopeId","data-v-4ea2a18a"]]),en={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},nn={key:1,class:"log border rounded bg-light tw-w-full",style:{"max-height":"20rem"}},sn={key:0,class:"mb-1"},ln=M({__name:"IncidentStackTrace",props:{incidentId:{},playerId:{}},setup(h){const f=h,{data:s}=V(O(f.playerId,f.incidentId)),a=k(()=>s.value?.errorInfo?.stackTrace?.split(`
`)),n=k(()=>{if(s.value?.errorInfo)return`${s.value.errorInfo.errorType}: ${s.value.errorInfo.errorMessage}`});return(v,P)=>(l(),m(e(N),{title:"Error & Stack Trace",variant:!a.value&&!n.value?"neutral":"primary"},{default:o(()=>[!a.value&&!n.value?(l(),d("p",en,"Error and stack trace info not included in this incident report.")):(l(),d("div",nn,[t("pre",null,[n.value?(l(),d("div",sn,r(n.value),1)):x("",!0),(l(!0),d(D,null,C(a.value,(T,E)=>(l(),d("div",{class:"m-0 tw-space-x-1",key:E},[(l(!0),d(D,null,C(T.split(" "),(w,I)=>(l(),d("span",{key:I,class:R(I===0?"":"text-muted")},r(w),3))),128))]))),128))])]))],void 0,!0),_:1},8,["variant"]))}}),rn={class:"text-danger"},on={class:"tw-mb-1 tw-font-semibold"},an={class:"tw-w-full"},dn={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},un={class:"tw-text-right"},cn={class:"tw-text-right"},pn={class:"tw-text-right"},mn={class:"tw-text-right"},fn={class:"tw-text-right"},vn={class:"tw-text-right"},wn={class:"tw-flex tw-justify-between tw-gap-4"},yn={class:"tw-w-full"},En=M({__name:"PlayerIncidentDetailView",setup(h){const f=rt(),s=Y(f.params.playerId),a=Y(f.params.incidentId),{data:n,error:v}=V(O(s,a)),P=k(()=>{const p=[];return s?a||p.push({title:"No incident ID parameter detected!",message:"Fetching incident reports requires an incident ID",variant:"warning",dataTest:"incident-no-incidentId"}):p.push({title:"No player ID parameter detected!",message:"Fetching incident reports requires a player ID.",variant:"danger",dataTest:"incident-no-playerId"}),p}),T=k(()=>!!n.value&&A.fromISO(n.value.deletionDateTime).diffNow("days").days<=3),E=[{label:"Error"},{label:"Network"},{label:"Client Info"},{label:"Extra Info"}],w=B(0);function I(p,i){dt(JSON.stringify({playerId:p,exportedAt:A.utc().toISO(),incident:{...i}},null,2),`incident-${p}-${i.incidentId}`)}return(p,i)=>{const u=it("fa-icon");return l(),m(e(It),{"is-loading":!e(n),error:e(v),alerts:P.value,variant:T.value?"warning":void 0,"full-width":"",permission:"api.incident_reports.view"},{alerts:o(()=>[T.value&&e(n)?(l(),m(e(Z),{key:0,title:"This Incident Will Be Deleted Soon!"},{default:o(()=>[t("div",null,[i[1]||(i[1]=_("This incident report will be deleted ",-1)),g(e(G),{instant:e(A).fromISO(e(n).deletionDateTime),"disable-tooltip":""},null,8,["instant"]),i[2]||(i[2]=_(" at ",-1)),g(e(G),{instant:e(A).fromISO(e(n).deletionDateTime),showAs:"dateTime"},null,8,["instant"])]),i[3]||(i[3]=t("div",{class:"tw-mt-1"},"Incidents are deleted every now and then, we recommend saving the data elsewhere if it is important.",-1))],void 0,!0),_:1,__:[3]})):x("",!0)]),overview:o(()=>[e(n)?(l(),m(e(yt),{key:0,id:e(n).incidentId,title:"Player Incident Report"},{subtitle:o(()=>[t("span",rn,r(e(n).errorInfo?.errorMessage),1),e(n).subType==="NullReferenceException"?(l(),m(e(Z),{key:0,class:"tw-mt-4",title:"Did You Know?"},{default:o(()=>i[4]||(i[4]=[t("div",null,"Null reference exceptions are a very common category of errors in Unity that do not cause the game crash outright, but often cause the game to appear stuck or otherwise 'broken' for the players.",-1)]),void 0,!0),_:1,__:[4]})):x("",!0)]),buttons:o(()=>[e(n)?(l(),m(e(at),{key:0,onClick:i[0]||(i[0]=c=>I(e(s),e(n)))},{icon:o(()=>[g(u,{class:"tw-mb-[0.05rem]",icon:"file-download"})]),default:o(()=>[i[12]||(i[12]=_("Download",-1))],void 0,!0),_:1,__:[12]})):x("",!0)]),default:o(()=>[t("div",on,[g(u,{icon:"chart-bar"}),i[5]||(i[5]=_(" Overview",-1))]),t("table",an,[t("tbody",dn,[t("tr",null,[i[6]||(i[6]=t("td",null,"Type",-1)),t("td",un,r(e(n).type),1)]),t("tr",null,[i[7]||(i[7]=t("td",null,"Subtype",-1)),t("td",cn,r(e(n).subType),1)]),t("tr",null,[i[8]||(i[8]=t("td",null,"Uploaded At",-1)),t("td",pn,[g(e(G),{instant:e(A).fromISO(e(n).uploadedAt),showAs:"dateTime"},null,8,["instant"])])]),t("tr",null,[i[9]||(i[9]=t("td",null,"Occurred At (device time)",-1)),t("td",mn,[g(e(G),{instant:e(A).fromISO(e(n).occurredAt),showAs:"dateTime"},null,8,["instant"])])]),t("tr",null,[i[10]||(i[10]=t("td",null,"Deletion Time",-1)),t("td",fn,[g(e(G),{instant:e(A).fromISO(e(n).deletionDateTime),showAs:"dateTime"},null,8,["instant"])])]),t("tr",null,[i[11]||(i[11]=t("td",null,"Player ID",-1)),t("td",vn,[g(e(ot),{to:`/players/${e(f).params.playerId}`},{default:o(()=>[_(r(e(f).params.playerId),1)],void 0,!0),_:1},8,["to"])])])])])],void 0,!0),_:1},8,["id"])):x("",!0)]),default:o(()=>[g(e(vt),{tabs:E,"current-tab":w.value},{"tab-0":o(()=>[g(ln,{class:"tw-mb-4",incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"]),g(At,{class:"tw-mb-4",incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"]),g(Se,{class:"tw-mb-4",incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"])]),"tab-1":o(()=>[g(tn,{incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"])]),"tab-2":o(()=>[t("div",wn,[g(xe,{class:"tw-w-full",incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"]),t("div",yn,[g(Tt,{class:"tw-mb-4",incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"]),g(Qt,{incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"])])])]),"tab-3":o(()=>[g(ft,{placementId:"PlayerIncidents/Details",incidentId:e(a),playerId:e(s)},null,8,["incidentId","playerId"]),e(n)&&e(n).extraInfo?(l(),m(e(N),{key:0,title:"Extra Info",variant:"primary"},{default:o(()=>[g(ut,{value:e(n).extraInfo,previewLocale:e(n).applicationInfo?.activeLanguage},null,8,["value","previewLocale"])],void 0,!0),_:1})):(l(),m(e(N),{key:1,title:"Extra Info",variant:"neutral"},{default:o(()=>i[13]||(i[13]=[t("div",{class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},"No extra info available for this incident.",-1)]),void 0,!0),_:1,__:[13]})),g(e(wt),{class:"tw-mt-4",data:e(n),label:"incident"},null,8,["data"])]),_:1},8,["current-tab"])],void 0,!0),_:1},8,["is-loading","error","alerts","variant"])}}});export{En as default};
