import{d as mt,a,m as g,o,q as i,D as _,c as k,h as S,K as V,cE as It,b7 as Ht,r as F,e as $,Q as P,w as D,j as c,k as f,t as w,f as m,_ as N,bE as zt,F as rt,b as dt,bF as Lt,aS as ut,bd as ht,y as R,ae as pt,U as Vt,z as Nt,B as J,a7 as Rt,bG as At,bj as jt,bg as Kt}from"./index-DAyiym1a.js";import{i as qt,a as Gt}from"./timeUtils-_Yn_3RE3.js";import{_ as ct}from"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-dEvjQEX9.js";import{_ as Wt}from"./MInputText.vue_vue_type_script_setup_true_lang-B9sf9LSD.js";import{_ as vt}from"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-D6xsoOzq.js";const Qt={key:0,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},Yt={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},Zt={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},Jt={key:1,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},Xt={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},te={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ee={key:2,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},se={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},ie={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ne={key:3,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},le={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},oe={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ae={key:4,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},re={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},de={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},ue={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},he={key:5,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},pe={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},ce={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ve={key:6,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},we={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},me={key:7,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},fe={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"32.5%",width:"35%",fill:"currentColor"}},ye={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ge={key:8,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},xe={key:9,class:"h-100 d-flex justify-content-center text-success",style:{position:"relative"}},wt=mt({__name:"MetaEventStreamCardGroupLine",props:{variant:{}},setup(y){return(l,s)=>l.variant==="newest-terminated"?(o(),a("div",Qt,[(o(),a("svg",Yt,s[0]||(s[0]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)]))),(o(),a("svg",Zt,s[1]||(s[1]=[i("rect",{x:"4.5",y:"5",width:"1",height:"5"},null,-1)])))])):l.variant==="newest-unterminated"?(o(),a("div",Jt,[(o(),a("svg",Xt,s[2]||(s[2]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)]))),(o(),a("svg",te,s[3]||(s[3]=[i("rect",{x:"4.5",y:"5",width:"1",height:"5"},null,-1)])))])):l.variant==="oldest-terminated"?(o(),a("div",ee,[(o(),a("svg",se,s[4]||(s[4]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)]))),(o(),a("svg",ie,s[5]||(s[5]=[i("rect",{x:"4.5",y:"0",width:"1",height:"5"},null,-1)])))])):l.variant==="oldest-unterminated"?(o(),a("div",ne,[(o(),a("svg",le,s[6]||(s[6]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)]))),(o(),a("svg",oe,s[7]||(s[7]=[i("rect",{x:"4.5",y:"0",width:"1",height:"5"},null,-1)])))])):l.variant==="both-terminated"?(o(),a("div",ae,[(o(),a("svg",re,s[8]||(s[8]=[i("rect",{x:"3.5",y:"0",width:"3",height:"1"},null,-1)]))),(o(),a("svg",de,s[9]||(s[9]=[i("rect",{x:"3.5",y:"10",width:"3",height:"1"},null,-1)]))),(o(),a("svg",ue,s[10]||(s[10]=[i("rect",{x:"4.5",y:"2.5",width:"1",height:"5.5"},null,-1)])))])):l.variant==="skip"?(o(),a("div",he,[(o(),a("svg",pe,s[11]||(s[11]=[i("rect",{x:"3.5",y:"4",width:"3",height:"1",transform:"rotate(-25, 3.5, 4)"},null,-1),i("rect",{x:"3.5",y:"6",width:"3",height:"1",transform:"rotate(-25, 3.5, 6)"},null,-1)]))),(o(),a("svg",ce,s[12]||(s[12]=[i("rect",{x:"4.5",y:"0",width:"1",height:"4"},null,-1),i("rect",{x:"4.5",y:"6",width:"1",height:"4"},null,-1)])))])):l.variant==="line"?(o(),a("div",ve,[(o(),a("svg",we,s[13]||(s[13]=[i("rect",{x:"4.5",y:"0",width:"1",height:"10"},null,-1)])))])):l.variant==="grouped-event"?(o(),a("div",me,[(o(),a("svg",fe,s[14]||(s[14]=[i("circle",{cx:"5",cy:"5",r:"4.5"},null,-1)]))),(o(),a("svg",ye,s[15]||(s[15]=[i("rect",{x:"4.5",y:"0",width:"1",height:"10"},null,-1)])))])):l.variant==="root-event"?(o(),a("div",ge)):l.variant==="error"?(o(),a("div",xe,s[16]||(s[16]=[i("small",null,"variant error",-1)]))):g("",!0)}});class A{id;path;time;type;typeData;constructor(l,s,d,u,r){this.id=l,this.path=s,this.time=d,this.type=u,this.typeData=r}search(l){return this.id.toLowerCase().includes(l)}getEventDisplayType(){}getEventKeywords(){}}class ft extends A{constructor(l,s,d,u,r,p,v,x){const T={title:s??"No title.",description:d??"No description.",sourceData:r,author:p,viewMore:v,viewMoreLink:x,terminatorStyle:null};super(u,"",l,"Event",T)}search(l){return this.typeData.title.toLowerCase().includes(l)||this.typeData.description.toLowerCase().includes(l)||this.typeData.author?.toLowerCase().includes(l)||super.search(l)}getEventDisplayType(){return this.typeData.title}getEventKeywords(){return this.typeData.sourceData.payload?.keywords}}class _e extends A{constructor(l,s,d,u){const r=s.typeData.sourceData?.payload.sessionToken??"Unknown",p=s.time,v=d.time,x=_.fromISO(v).diff(_.fromISO(p)),T={startTime:p,duration:x,sessionNumber:s.typeData.sourceData?.payload.sessionNumber||"Unknown",numEvents:u,deviceName:s.typeData.sourceData?.payload.deviceModel||"Unknown"};super(r,l,v,"Session",T)}search(l){return this.typeData.deviceName.toLowerCase().includes(l)??super.search(l)}}class be extends A{constructor(l,s,d,u){const r=s.time,p=d.time,v=_.fromISO(p).diff(_.fromISO(r)),x={numEvents:u,repeatedTitle:s.typeData.title,duration:v};super("",l,p,"RepeatedEvents",x)}search(l){return this.typeData.repeatedTitle.toLowerCase().includes(l)??super.search(l)}}class ke extends A{constructor(l,s,d,u){const r=_.fromISO(s.time).toISODate()??"Unknown",p={date:s.time,numEvents:u,deviceName:s.typeData.sourceData?.payload.deviceModel??""};super(r,l,d.time,"Day",p)}search(l){return this.typeData.deviceName.toLowerCase().includes(l)??super.search(l)}}function Rs(y){const l=(r,p)=>{const v=[],x=`session_${_.fromISO(r[0].time).toUnixInteger()}_${r[0].id}`;return v.push(...r.map(T=>(T.path=T.path+x,T))),v.length>1?(v[0].typeData.terminatorStyle=p?"oldest-terminated":"oldest-unterminated",v[v.length-1].typeData.terminatorStyle="newest-terminated"):v[0].typeData.terminatorStyle="both-terminated",v.push(new _e(x,r[0],r[r.length-1],r.length)),v};let s=[],d=[],u=0;return y.forEach(r=>{if(r instanceof ft){const p=r.typeData.sourceData.payload.$type;p==="Metaplay.Core.Player.PlayerEventClientConnected"?(d.push(r),u++):p==="Metaplay.Core.Player.PlayerEventClientDisconnected"?u>0?(d.push(r),s.push(...l(d,!0)),d=[]):(s.push(r),s=l(s,!1)):d.length?d.push(r):s.push(r)}else s.push(r)}),d.length&&s.push(...l(d,!0)),s}function As(y){const l=d=>{const u=[],r=`date_${_.fromISO(d[0].time).toUnixInteger()}_${d[0].id}`;return u.push(...d.map(p=>(p.path=p.path+r,p))),u.length>1?(u[0].typeData.terminatorStyle="oldest-terminated",u[u.length-1].typeData.terminatorStyle="newest-terminated"):u[0].typeData.terminatorStyle="both-terminated",u.push(new ke(r,d[0],d[d.length-1],d.length)),u},s=[];if(y.length){let d=[],u=_.fromISO(y[0].time).toISODate();y.forEach(r=>{d.push(r);const p=_.fromISO(r.time).toISODate();p!==u&&(s.push(...l(d)),d=[],u=p)}),d.length&&s.push(...l(d))}return s}function js(y,l=5){const s=r=>{if(r.length>=l){const p=`repeat_${_.fromISO(r[0].time).toUnixInteger()}_${r[0].id}`,v=[];return v.push(...r.map(x=>(x.path=x.path?`${x.path}.${p}`:p,x))),v.push(new be(r[0].path,r[0],r[r.length-1],r.length)),v}else return r},d=[];let u=[];return y.forEach(r=>{r.type==="Event"?u.length===0?u=[r]:u[0].typeData.title===r.typeData.title?u.push(r):(d.push(...s(u)),u=[r]):(d.push(...s(u)),u=[],d.push(r))}),d.push(...s(u)),d}function Ks(y){const l=y.reduce((r,p)=>r+(p instanceof ft?1:0),0);let s=null,d=null,u=null;return y.length&&(s=_.fromISO(y[0].time),d=_.fromISO(y[y.length-1].time),u=d.diff(s)),{numEvents:l,oldestEventTime:s,newestEventTime:d,duration:u}}function De(y){const l=[],s=[];return y.forEach(d=>{const u=d.getEventDisplayType();u&&!l.includes(u)&&l.push(u);const r=d.getEventKeywords();r&&r.forEach(p=>{s.includes(p)||s.push(p)})}),l.sort(),s.sort(),{eventTypes:l,eventKeywords:s}}const Ee={key:2,class:"tw-pointer-events-none tw-ml-2 tw-w-5 tw-h-5 tw-fill-blue-500 tw-animate-spin",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","aria-hidden":"true"},Te={style:{"margin-top":"-1rem"}},Se={class:"text-muted tw-italic small mr-2"},$e={key:0,class:"small text-muted tw-text-center mb-4 pt-4"},Ce={key:1,class:"tw-w-full card-manual-content-padding pt-2"},Pe={class:"tw-text-neutral-500 tw-text-xs+"},Me={key:0,class:"tw-text-neutral-500 tw-text-xs+"},Be={key:3},Fe=["id"],Ue={key:0,class:"tw-border-b tw-border-neutral-200 tw-mb-3"},Oe={key:0},Ie={key:1},He={class:"sm:tw-flex tw-items-center sm:tw-space-x-2"},ze={key:2,class:"text-muted small tw-italic"},Le={key:4,class:"text-muted small tw-italic"},Ve={key:5,class:"tw-text-sm tw-mt-3"},Ne={class:"tw-font-semibold"},Re={key:0,class:"tw-font-semibold"},Ae={key:0,class:"tw-text-center tw-text-neutral-500 tw-text-xs+ tw-pb-2 tw-space-x-1"},je={key:1,class:"group-element-borders group-element-stripes tw-mb-3"},Ke=["data-testid"],qe=["onClick"],Ge={class:"tw-grow"},We={class:"tw-flex tw-justify-between"},Qe={class:"tw-text-sm text-muted tw-ml-1"},Ye={class:"tw-text-sm"},Ze={class:"tw-flex tw-justify-between"},Je={class:"tw-text-sm text-muted"},Xe={class:"tw-text-sm"},ts=["onClick"],es={class:"tw-grow"},ss={class:"tw-flex tw-justify-between"},is={class:"font-weight-bold"},ns={class:"tw-text-sm"},ls={class:"tw-text-sm text-muted"},os=["onClick"];const as={class:"py-1 pr-2 text-right"},rs={key:0},ds={key:0,class:"small text-muted"},us={key:0},hs={key:1},ps={key:0},cs={class:"pl-2"},vs={key:0,class:"py-2"},ws={class:"font-weight-bold"},ms={key:1},fs={class:"text-muted small"},ys={class:"py-1 pr-2 text-right"},gs={key:0,class:"small text-muted"},xs={key:0,class:"text-nowrap"},_s={key:1},bs={key:0},ks={class:"!tw-overflow-x-hidden",style:{"overflow-y":"hidden"}},Ds=["onClick"],Es={class:"tw-w-full"},Ts={class:"d-flex justify-content-between"},Ss={class:"font-weight-bold"},$s={class:"font-weight-normal small text-muted tw-ml-1"},Cs={class:"small",style:{"padding-top":"0.2rem"}},Ps={class:"text-nowrap"},Ms={class:"text-muted small text-break-word"},Bs={key:0,class:"tw-my-1"},Fs={class:"tw-bg-neutral-100 tw-text-xs tw-p-3 tw-border-neutral-200 tw-border tw-rounded-md"},Us={class:"tw-text-neutral-600"},Os={key:2,class:"small text-muted tw-text-center mb-4 pt-4"},Is=mt({__name:"MetaEventStreamCard",props:{title:{},icon:{default:""},eventStream:{default:null},eventStreamLoading:{type:Boolean},utilitiesMode:{default:"filter"},utilitiesCondition:{default:"and"},searchPreHighlight:{default:void 0},keywordPreFilters:{default:()=>[]},eventTypePreFilters:{default:()=>[]},emptyMessage:{default:"No events in this stream."},noResultsMessage:{default:"No events found. Try a different search string? 🤔"},maxHeight:{default:""},permission:{default:""},showViewMoreLink:{type:Boolean,default:!1},showTimeDeltas:{type:Boolean,default:!0},allowPausing:{type:Boolean}},setup(y){const l=y,s=k(()=>l.eventTypePreFilters.length===0&&l.keywordPreFilters.length===0?l.eventStream:l.eventStream?.filter(e=>{if(e.type!=="Event"&&e.type!=="RepeatedEvents"||l.eventTypePreFilters.length>0&&l.eventTypePreFilters.includes(e.getEventDisplayType()??""))return!0;const t=e.getEventKeywords();return!!(l.keywordPreFilters.length>0&&t&&l.keywordPreFilters.some(h=>t.includes(h)))})),d=k(()=>De(s.value??[])),u=S(""),r=S([]),p=S([]),v=S(l.utilitiesMode);V(()=>l.utilitiesMode,e=>{v.value=e});const x=S(l.utilitiesCondition);V(()=>l.utilitiesCondition,e=>{x.value=e});const T=k(()=>{if(X.value){let e=E.value;return(l.searchPreHighlight||C.value||B.value)&&(e=e.map(t=>{const h=gt(t);let b=!1;return x.value==="and"&&(C.value||B.value)?b=(u.value?tt(t):!0)&&(r.value.length>0?et(t):!0)&&(p.value.length>0?st(t):!0):b=tt(t)||et(t)||st(t),t.preHighlightMatch=h,t.userHighlightMatch=b,t})),v.value==="filter"&&(C.value||B.value)&&(e=e.filter(t=>t.userHighlightMatch)),e}else return E.value}),yt=k(()=>{const e=[];return C.value&&e.push("search string"),r.value.length>0&&e.push("selected event type(s)"),p.value.length>0&&e.push("selected keyword(s)"),e}),X=k(()=>C.value||B.value||!!l.searchPreHighlight),C=k(()=>u.value.length>=1),B=k(()=>r.value.length>0||p.value.length>0);function gt(e){return!!l.searchPreHighlight&&e.search(l.searchPreHighlight.toLocaleLowerCase())}function tt(e){return!!u.value&&e.search(u.value.toLocaleLowerCase())}function et(e){return r.value.includes(e.getEventDisplayType()??"")}function st(e){const t=e.getEventKeywords();return p.value.some(h=>t?.includes(h))}function xt(e){return e?E.value.reduce((t,h)=>h.getEventDisplayType()===e?t+1:t,0):0}function _t(e){return e?E.value.reduce((t,h)=>(h.getEventKeywords()??[]).includes(e)?t+1:t,0):0}function bt(e){return e.preHighlightMatch?"presearch-highlight":v.value==="filter"?"":e.userHighlightMatch?"user-highlight":""}V([u,r,p],it);const U=S([]);function it(){X.value&&new Set(T.value.filter(t=>t.preHighlightMatch||t.userHighlightMatch).map(t=>t.path)).forEach(t=>{let h="";t.split(".").forEach(b=>{h+=b,nt(h),h+="."})})}function j(e){if(e)if(U.value.includes(e))kt(e);else{let t="";e.split(".").forEach(h=>{t+=h,nt(t),t+="."})}}function nt(e){U.value.includes(e)||U.value.push(e)}function kt(e){const t=U.value.indexOf(e);t!==-1&&U.value.splice(t,1)}function K(e){return U.value.includes(e)}const H=S([]);function Dt(e){return!!e.id}function Et(e){const{id:t}=e;if(t){const h=H.value.indexOf(t);h===-1?H.value.push(t):H.value.splice(h,1)}}function lt(e){return H.value.includes(e.id)}const E=It([]),q=k(()=>T.value.filter(e=>{let t=e.path??"";if(e.type!=="Event"&&(t=t.substring(0,t.lastIndexOf("."))),!t)return!0;let h="",b=!0;const M=t.split(".");for(const Y of M){if(h+=Y,!K(h)){b=!1;break}h+="."}return b})),ot=k(()=>{let e=0;return q.value.map(t=>{const h={...t,decorations:{timeBetweenEvents:Tt(q.value[e],q.value[e+1]),lineVariant:Mt(t)}};return K(t.path)&&(h.decorations.isPathUnfolded=!0),Dt(t)&&(h.decorations.isEventExpandable=!0),++e,h})});function Tt(e,t){const h=e?.time,b=t?.time;return h&&b?_.fromISO(h).diff(_.fromISO(b)):null}const O=S(!1),G=S(!1),W=S(_.utc());function St(){O.value=!O.value}let at=!1;V([s,O],([e,t],[h,b])=>{t?b&&(G.value=!0):(E.value=e?.slice().reverse()??[],G.value=!1,W.value=_.utc()),!at&&E.value.length>0&&(at=!0,it())},{immediate:!0,deep:!1});const z=k(()=>!!s.value),I=S(!1),Q=k(()=>l.permission?Ht().doesHavePermission(l.permission):!0),$t=k(()=>{const e=E.value.length,t=T.value.length;return E.value.filter(h=>h.type==="Event"||h.type==="RepeatedEvents").length?t!==e?`${t} / ${e}`:`${e}`:0}),Ct=k(()=>{const e=[];return(l.keywordPreFilters.length>0||l.eventTypePreFilters.length>0)&&e.push("pre-filtered data"),l.searchPreHighlight&&e.push("pre-highlighted data"),v.value==="filter"&&(C.value||B.value)?e.push("filter active"):v.value==="highlight"&&(C.value||B.value)&&e.push("highlight active"),e.join(" & ")}),Pt=k(()=>E.value.length===0?"neutral":"primary");function Mt(e){return e.type==="Event"?e.typeData.terminatorStyle?e.typeData.terminatorStyle:e.path?e.path.startsWith("repeat")?"none":"grouped-event":"none":e.type==="RepeatedEvents"&&e.path?e.path.startsWith("repeat")?"none":K(e.path)?"line":"skip":"error"}function Bt(e){const t=e.typeData.sourceData?.payload?.$type;if(t){const h=t.split(".").pop();if(h)return`event-${h.replace(/[^a-zA-Z0-9]/g,"-")}`}}return(e,t)=>{const h=F("fa-icon"),b=F("b-card-title"),M=F("b-skeleton"),Y=F("b-row"),Ft=F("meta-username"),Ut=F("meta-lazy-loader"),Ot=F("b-card");return o(),$(Ot,{class:P(["shadow-sm",{"bg-light":!z.value||!Q.value}]),style:{"min-height":"12rem"},"no-body":""},{default:D(()=>[i("div",{class:"tw-cursor-pointer tw-px-4 tw-flex tw-justify-between tw-items-center tw-pt-4 tw-cursor-pointer",onClick:t[1]||(t[1]=n=>I.value=!I.value)},[c(b,{class:"tw-flex tw-items-center"},{default:D(()=>[e.icon?(o(),$(h,{key:0,class:"mr-2",icon:e.icon},null,8,["icon"])):g("",!0),f(w(e.title),1),z.value&&Q.value?(o(),$(m(N),{key:1,class:"tw-ml-1",shape:"pill",variant:Pt.value,"data-testid":"badge-text"},{default:D(()=>[f(w($t.value),1)],void 0,!0),_:1},8,["variant"])):g("",!0),e.eventStreamLoading?(o(),a("svg",Ee,t[7]||(t[7]=[i("path",{d:"M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"},null,-1)]))):g("",!0)],void 0,!0),_:1}),i("span",Te,[i("span",Se,w(Ct.value),1),c(m(zt),{"disabled-tooltip":!z.value||!E.value.length?"There are no events to search.":void 0,"aria-label":"Toggle the utilities menu",onClick:t[0]||(t[0]=n=>I.value=!I.value)},{default:D(()=>[c(h,{class:"tw-mr-1",icon:"angle-right",size:"sm"}),c(h,{icon:"search",size:"sm"})],void 0,!0),_:1},8,["disabled-tooltip"])])]),Q.value?z.value?!E.value.length||!E.value.filter(n=>n.type==="Event"||n.type==="RepeatedEvents").length?(o(),$(Y,{key:2,class:"tw-p-3 tw-text-center","align-h":"center","no-gutters":""},{default:D(()=>[i("p",Pe,w(e.emptyMessage),1),e.keywordPreFilters.length>0||e.eventTypePreFilters.length>0?(o(),a("p",Me,[t[10]||(t[10]=f("Event data has been pre-filtered down to events that match the following types OR keywords: ",-1)),i("span",null,w(e.eventTypePreFilters.concat(e.keywordPreFilters).join(", ")),1)])):g("",!0)],void 0,!0),_:1})):(o(),a("div",Be,[c(m(Lt),null,{default:D(()=>[E.value.length&&I.value?(o(),a("div",{key:0,class:"tw-bg-neutral-100 tw-w-full tw-border-t tw-border-b tw-border-neutral-200 tw-px-4 tw-py-3",id:e.title},[e.keywordPreFilters.length>0||e.eventTypePreFilters.length>0||e.searchPreHighlight?(o(),a("div",Ue,[e.keywordPreFilters.length>0||e.eventTypePreFilters.length>0?(o(),a("div",Oe,[t[12]||(t[12]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Event Data Filters",-1)),i("p",null,[t[11]||(t[11]=f("Event data has been pre-filtered down to events that match the following types OR keywords: ",-1)),i("span",null,w(e.eventTypePreFilters.concat(e.keywordPreFilters).join(", ")),1)])])):g("",!0),e.searchPreHighlight?(o(),a("div",Ie,[t[15]||(t[15]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Pre-Highlight",-1)),i("p",null,[t[13]||(t[13]=f("Events matching the search string ",-1)),c(m(N),null,{default:D(()=>[f(w(e.searchPreHighlight),1)],void 0,!0),_:1}),t[14]||(t[14]=f(" are highlighted.",-1))])])):g("",!0)])):g("",!0),i("div",He,[t[16]||(t[16]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Utilities Mode",-1)),c(m(ct),{"model-value":v.value,options:[{label:"Highlight",value:"highlight"},{label:"Filter",value:"filter"}],size:"small","onUpdate:modelValue":t[2]||(t[2]=n=>v.value=n)},null,8,["model-value"]),t[17]||(t[17]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Logic Condition",-1)),c(m(ct),{"model-value":x.value,options:[{label:"And",value:"and"},{label:"Or",value:"or"}],size:"small","onUpdate:modelValue":t[3]||(t[3]=n=>x.value=n)},null,8,["model-value"])]),t[20]||(t[20]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Search",-1)),c(m(Wt),{class:"tw-mb-2","model-value":u.value,placeholder:"Type your search here...",variant:C.value?"success":"default",debounce:300,showClearButton:"","onUpdate:modelValue":t[4]||(t[4]=n=>u.value=n)},null,8,["model-value","variant"]),t[21]||(t[21]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Event Types",-1)),d.value.eventTypes.length>0?(o(),$(m(vt),{key:1,"model-value":r.value,options:d.value.eventTypes.map(n=>({label:`${n} (${xt(n)})`,value:n})),size:"small","onUpdate:modelValue":t[5]||(t[5]=n=>r.value=n)},null,8,["model-value","options"])):(o(),a("div",ze,"None available for this event stream.")),t[22]||(t[22]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Keywords",-1)),d.value.eventKeywords.length>0?(o(),$(m(vt),{key:3,"model-value":p.value,options:d.value.eventKeywords.map(n=>({label:`${n} (${_t(n)})`,value:n})),size:"small","onUpdate:modelValue":t[6]||(t[6]=n=>p.value=n)},null,8,["model-value","options"])):(o(),a("div",Le,"None available for this event stream.")),C.value||B.value?(o(),a("div",Ve,[i("span",Ne,w(v.value==="filter"?"Only showing":"Highlighting"),1),t[18]||(t[18]=f(" events that match the",-1)),(o(!0),a(rt,null,dt(yt.value,(n,L)=>(o(),a("span",{class:P({"tw-ml-1":L>0})},[L>0?(o(),a("span",Re,w(x.value==="or"?"OR":"AND"),1)):g("",!0),f(" "+w(n),1)],2))),256)),t[19]||(t[19]=i("span",null,".",-1))])):g("",!0)],8,Fe)):g("",!0)],void 0,!0),_:1}),i("div",{class:"d-flex flex-column justify-content-between h-100",style:jt(`max-height: ${e.maxHeight}; overflow-y: auto;`)},[i("div",null,[e.allowPausing?(o(),a("div",Ae,[ut(i("span",null,[t[23]||(t[23]=f("Last update ",-1)),c(m(R),{instant:W.value},null,8,["instant"]),t[24]||(t[24]=f(".",-1))],512),[[ht,!O.value]]),ut(i("span",null,[t[25]||(t[25]=f("Updates paused ",-1)),c(m(R),{instant:W.value},null,8,["instant"]),t[26]||(t[26]=f(".",-1))],512),[[ht,O.value]]),c(m(pt),{onClick:St,"data-testid":"play-pause-button"},{default:D(()=>[f(w(O.value?"Resume":"Pause")+" updates",1)],void 0,!0),_:1}),i("div",null,[G.value?(o(),$(m(N),{key:0,shape:"pill",variant:"primary"},{default:D(()=>t[27]||(t[27]=[f("New data available",-1)]),void 0,!0),_:1,__:[27]})):g("",!0)])])):g("",!0),ot.value.length>0?(o(),a("div",je,[(o(!0),a(rt,null,dt(ot.value,(n,L)=>(o(),a("div",{class:"group","data-testid":Bt(n)},[(o(),$(Ut,{key:L,class:P(bt(n)),placeholderEventHeight:50},{default:D(()=>[n.type==="Session"?(o(),a("div",{key:0,class:P(["card-manual-content-padding tw-flex clickable-list-group-item tw-py-3 tw-gap-2",{"group-open":n.decorations.isPathUnfolded}]),onClick:Z=>j(n.path)},[c(h,{class:"tw-mt-1 tw-text-sm",icon:"angle-right"}),i("div",Ge,[i("div",We,[i("div",null,[c(m(Vt),{class:"font-weight-bold",content:`Session ID: ${n.id}`,noUnderline:""},{default:D(()=>[f("Session #"+w(n.typeData.sessionNumber),1)],void 0,!0),_:2},1032,["content"]),i("span",Qe,w(n.typeData.numEvents)+" events",1)]),i("div",Ye,[c(m(R),{instant:m(_).fromISO(n.typeData.startTime)},null,8,["instant"])])]),i("div",Ze,[i("div",Je,w(n.typeData.deviceName),1),i("div",Xe,[t[28]||(t[28]=f("Lasted for ",-1)),c(m(J),{duration:m(Nt).fromISO(n.typeData.duration)},null,8,["duration"])])])])],10,qe)):g("",!0),n.type==="Day"?(o(),a("div",{key:1,class:P(["card-manual-content-padding tw-flex clickable-list-group-item tw-py-3 tw-gap-2",{"group-open":n.decorations.isPathUnfolded}]),onClick:Z=>j(n.path)},[c(h,{class:"tw-mt-1 tw-text-sm",icon:"angle-right"}),i("div",es,[i("div",ss,[i("div",is,w(m(qt)(n.typeData.date)),1),i("div",ns,[c(m(R),{instant:m(_).fromISO(n.typeData.date)},null,8,["instant"])])]),i("div",ls,w(n.typeData.numEvents)+" events",1)])],10,ts)):n.type==="RepeatedEvents"?(o(),a("div",{key:2,class:P(["card-manual-content-padding clickable-list-group-item",{"group-open":n.decorations.isPathUnfolded}]),onClick:Z=>j(n.path)},[(o(),a("div",{key:1,class:P(`${n.decorations.lineVariant!=="none"?"three":"two"}-column-layout`)},[i("div",as,[n.decorations.isPathUnfolded?g("",!0):(o(),a("div",rs,[i("div",null,w(m(Gt)(n.time)),1),e.showTimeDeltas?(o(),a("div",ds,[n.decorations.timeBetweenEvents?(o(),a("span",us,[t[31]||(t[31]=f("+ ",-1)),c(m(J),{duration:n.decorations.timeBetweenEvents,showAs:"topTwoUnits"},null,8,["duration"])])):(o(),a("span",hs,"Oldest event"))])):g("",!0)]))]),n.decorations.lineVariant!=="none"?(o(),a("div",ps,[c(wt,{variant:n.decorations.lineVariant},null,8,["variant"])])):g("",!0),i("div",cs,[n.decorations.isPathUnfolded?(o(),a("div",ms,[i("span",fs,[f(w(n.typeData.numEvents)+" repeating events. ",1),t[34]||(t[34]=i("span",{class:"tw-text-xs tw-text-blue-500 hover:tw-underline"},"Collapse",-1))])])):(o(),a("div",vs,[c(h,{class:"mr-2",icon:"angle-right"}),i("span",null,[f(w(n.typeData.numEvents)+" x ",1),i("span",ws,w(n.typeData.repeatedTitle),1),t[32]||(t[32]=f()),t[33]||(t[33]=i("span",{class:"tw-text-xs tw-text-blue-500 hover:tw-underline"},"Expand",-1))])]))])],2))],10,os)):n.type==="Event"?(o(),a("div",{key:3,class:P(["card-manual-content-padding",`${n.decorations.lineVariant!=="none"?"three":"two"}-column-layout`]),ref_for:!0,ref:"event-item"},[i("div",ys,[i("p",null,w(m(_).fromISO(n.time).toUTC().toFormat("HH:mm:ss")),1),e.showTimeDeltas?(o(),a("div",gs,[n.decorations.timeBetweenEvents?(o(),a("span",xs,[t[35]||(t[35]=f("+ ",-1)),c(m(J),{duration:n.decorations.timeBetweenEvents,showAs:"topTwoUnits"},null,8,["duration"])])):(o(),a("span",_s,"Oldest event"))])):g("",!0)]),n.decorations.lineVariant!=="none"?(o(),a("div",bs,[c(wt,{variant:n.decorations.lineVariant},null,8,["variant"])])):g("",!0),i("div",ks,[i("div",{class:"clickable-list-group-item d-flex rounded-sm py-1 pr-1",onClick:Z=>Et(n)},[(n.decorations.isEventExpandable,o(),a("div",{key:0,class:P({"not-collapsed":lt(n)})},[c(h,{class:"tw-text-sm mx-2",icon:"angle-right"})],2)),i("div",Es,[i("div",Ts,[i("div",null,[i("span",Ss,w(n.typeData.title),1),i("span",$s,[n.typeData.author?(o(),$(Ft,{key:0,username:n.typeData.author},null,8,["username"])):g("",!0)])]),i("div",Cs,[e.showViewMoreLink&&n.typeData.viewMoreLink?(o(),$(m(pt),{key:0,to:n.typeData.viewMoreLink,"data-testid":"view-more-link"},{default:D(()=>[i("div",Ps,"View "+w(n.typeData.viewMore),1)],void 0,!0),_:2},1032,["to"])):g("",!0)])]),i("div",Ms,w(n.typeData.description),1)])],8,Ds),c(At,{name:"collapse-transition"},{default:D(()=>[lt(n)?(o(),a("div",Bs,[Rt(e.$slots,"event-details",{event:n},()=>[i("pre",Fs,[t[36]||(t[36]=i("div",{class:"tw-text-neutral-500"},"// raw_event_payload",-1)),i("div",Us,w(n.typeData.sourceData),1)])],!0)])):g("",!0)],void 0,!0),_:2},1024)])],2)):g("",!0)],void 0,!0),_:2},1032,["class"]))],8,Ke))),256))])):(o(),a("div",Os,w(e.noResultsMessage),1))])],4)])):(o(),a("div",Ce,[c(M,{width:"85%"}),c(M,{width:"55%"}),c(M,{width:"70%"}),c(M,{class:"tw-mt-4",width:"80%"}),c(M,{width:"65%"})])):(o(),a("div",$e,[t[8]||(t[8]=f("You need the ",-1)),c(m(N),null,{default:D(()=>[f(w(e.permission),1)],void 0,!0),_:1}),t[9]||(t[9]=f(" permission to view this card.",-1))]))],void 0,!0),_:3},8,["class"])}}}),qs=Kt(Is,[["__scopeId","data-v-c3724ed5"]]);export{ft as E,qs as M,Rs as a,As as b,Ks as g,js as w};
