import{d as C,E as H,c as v,r as y,e as _,m,f as e,o,w as s,j as r,s as P,a,q as c,v as A,F as I,b as B,x as g,t as u,k as p,y as h,D as w}from"./index-DAyiym1a.js";import{M as L,a as S,b as F}from"./metaListUtils-B-xQ0HnD.js";import{a as $}from"./players-CkgXyjra.js";const T={key:0,class:"tw-text-orange-500"},V={key:0},j={key:0},E={key:1,class:"tw-italic tw-text-neutral-500"},q={key:0,class:"tw-text-xs tw-text-neutral-500"},z={key:1,class:"tw-text-center tw-italic tw-text-neutral-400"},Q=C({__name:"PlayerDeviceHistoryCard",props:{playerId:{}},setup(k){const M=k,{data:l}=H($(M.playerId)),f=v(()=>l.value.model.deviceHistory?Object.keys(l.value.model.deviceHistory).map(d=>Object.assign({id:d},l.value.model.deviceHistory[d])):[]),x=["deviceModel","id"],b=[new L("Last login ","lastLoginAt",S.Ascending),new L("Last login ","lastLoginAt",S.Descending)],D=v(()=>[F.asDynamicFilterSet(f.value,"Platform",d=>d.clientPlatform)]);return(d,i)=>{const O=y("fa-icon"),N=y("meta-list-card");return e(l)?(o(),_(N,{key:0,title:"Device History",icon:"tablet-alt",itemList:f.value,searchFields:x,sortOptions:b,filterSets:D.value,defaultSortOption:1,emptyMessage:`${e(l).model.playerName||"n/a"} has no device history.`,"data-testid":"player-device-history-card"},{"item-card":s(({item:t})=>[r(e(P),{extraMListItemMargin:""},{header:s(()=>[r(e(g),{noLeftPadding:""},{"top-right":s(()=>[i[0]||(i[0]=p("Last login ",-1)),r(e(h),{instant:e(w).fromISO(t.lastLoginAt)},null,8,["instant"])]),"bottom-left":s(()=>[t.incompleteHistory?(o(),a("div",T,"Note: This is an old device and we don't have a full login history for it.")):m("",!0),c("div",null,u(t.id),1)]),"bottom-right":s(()=>[c("div",null,[i[1]||(i[1]=p("Created ",-1)),r(e(h),{instant:e(w).fromISO(t.firstSeenAt)},null,8,["instant"])]),c("div",null,"Total logins: "+u(t.numLogins),1)]),default:s(()=>[c("span",null,[r(O,{icon:t.clientPlatform==="iOS"||t.clientPlatform==="Android"?"tablet-alt":"desktop"},null,8,["icon"]),p(" "+u(t.deviceModel),1)])],void 0,!0),_:2},1024)]),default:s(()=>[t.loginMethods&&t.loginMethods.length>0?(o(),a("div",V,[i[2]||(i[2]=c("div",{class:"tw-mb-2 tw-font-semibold"},"Login Methods History",-1)),r(e(A),{showBorder:"",striped:""},{default:s(()=>[(o(!0),a(I,null,B(t.loginMethods,n=>(o(),_(e(g),{class:"!tw-px-2.5",key:n?.id,condensed:""},{"top-right":s(()=>[n?(o(),a("span",q,u(n.id),1)):m("",!0)]),default:s(()=>[n?(o(),a("span",j,u(n.platform==="DeviceId"?"Client token":n.platform),1)):(o(),a("span",E,"No login history."))],void 0,!0),_:2},1024))),128))],void 0,!0),_:2},1024)])):(o(),a("div",z,"No login methods recorded for this device."))],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets","emptyMessage"])):m("",!0)}}});export{Q as default};
