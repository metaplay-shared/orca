import{d as S,C as w,E as l,h,a8 as L,c,e as _,m as x,f as a,o as C,w as k,q as r,j as N,bs as $,bt as O}from"./index-DAyiym1a.js";import{a as B}from"./players-CkgXyjra.js";import{_ as U}from"./MInputSingleSelectRadio.vue_vue_type_script_setup_true_lang-CGM7lb3s.js";import{_ as A}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CRnsCPt_.js";import"./index-TQG-La0y.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-XDUxofmt.js";import"./index-CVSO09yM.js";const I={class:"tw-flex tw-justify-between"},M=S({__name:"PlayerActionUpdateLogicVersion",props:{playerId:{}},setup(p){const{showSuccessNotification:u}=O(),d=p,s=w(),g=$(),{data:e,refresh:m}=l(B(d.playerId)),o=h(e.value.model.logicVersion),{data:n}=l(L());function v(){o.value=e.value.model.logicVersion}const f=c(()=>o.value!==e.value.model.logicVersion),V=c(()=>s.supportedLogicVersionOptions?n.value?s.supportedLogicVersionOptions.filter(t=>n.value.clientCompatibilitySettings.activeLogicVersionRange.minVersion<=t&&n.value.clientCompatibilitySettings.activeLogicVersionRange.maxVersion>=t||t===e.value.model.logicVersion).map(t=>({label:t===e.value.model.logicVersion?`${t} (current)`:String(t),value:t,disabled:t<e.value.model.logicVersion})):[]:[]);async function b(){await g.post(`/players/${e.value.id}/updateLogicVersion`,{newLogicVersion:o.value}),u(`${e.value.model.playerName||"n/a"} update to ${o.value}.`),m()}return(t,i)=>a(e)?(C(),_(a(A),{key:0,"modal-title":"Update Logic Version",action:b,"trigger-button-label":"Update Logic Version",variant:"warning","ok-button-label":"Save Settings","ok-button-disabled-tooltip":f.value?void 0:"Select a different logic version to update the player.","trigger-button-disabled-tooltip":a(e).model.logicVersion==a(s).supportedLogicVersions.maxVersion?"Player is already at the highest active logic version.":void 0,"confirm-permission":"api.players.update_logic_version",onShow:v,"data-testid":"action-update-logic-version-player"},{default:k(()=>[r("div",I,[i[1]||(i[1]=r("span",{class:"tw-font-semibold"},"Logic Version",-1)),N(a(U),{class:"tw-relative","model-value":o.value,name:"logicVersionInput",size:"small",options:V.value,"onUpdate:modelValue":i[0]||(i[0]=y=>o.value=y),"data-testid":"player-logic-version-input"},null,8,["model-value","options"])]),i[2]||(i[2]=r("span",{class:"tw-text-xs+ tw-text-neutral-500"},"Changing the player's logic version will disconnect the player and force them to update to a newer version of the game client before they can reconnect.",-1))],void 0,!0),_:1,__:[2]},8,["ok-button-disabled-tooltip","trigger-button-disabled-tooltip"])):x("",!0)}});export{M as default};
