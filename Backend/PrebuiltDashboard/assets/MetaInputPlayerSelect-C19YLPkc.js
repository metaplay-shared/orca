import{d as S,r as x,e as o,o as i,w as t,f as r,x as u,q as I,k as l,t as s,m as c,U as f,j as y,bs as P}from"./index-DAyiym1a.js";import{i as h}from"./timeUtils-_Yn_3RE3.js";import{_ as U}from"./MInputSingleSelectAsyncDropdown.vue_vue_type_script_setup_true_lang-DiSHRdQ3.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./debounce-CRuraxcR.js";import"./isSymbol-BXvDeGRF.js";const N=S({__name:"MetaInputPlayerSelect",props:{label:{},value:{},ignorePlayerIds:{}},emits:["input"],setup(g,{emit:b}){const p=g,w=b,_=P();async function k(n,a,d){const v=(await _.get(`/players/?query=${encodeURIComponent(n)}&count=${a}`)).data.map(m=>({label:m.name,value:m,disabled:p.ignorePlayerIds?p.ignorePlayerIds.includes(m.id):!1}));return{options:v,hasMoreData:v.length===a,requestToken:d}}return(n,a)=>{const d=x("fa-icon");return i(),o(r(U),{"min-height":"4rem","model-value":n.value,"search-function":k,placeholder:"Search for a player...",label:n.label,"onUpdate:modelValue":a[0]||(a[0]=e=>w("input",e)),"data-testid":"input-player-select"},{option:t(({option:e})=>[e.value?.isInitialized?e.value?.deserializedSuccessfully?e.value?.deletionStatus.startsWith("Deleted")?(i(),o(r(u),{key:2,class:"!tw-p-0 tw-text-red-800"},{"top-right":t(()=>[l(s(e.value.id),1)]),"bottom-left":t(()=>a[4]||(a[4]=[l("Player deleted",-1)])),default:t(()=>[l("☠️ "+s(e.value.name),1)],void 0,!0),_:2},1024)):(i(),o(r(u),{key:3,class:"!tw-p-0"},{badge:t(()=>[e.value?.totalIapSpend>0?(i(),o(r(f),{key:0,content:"Total IAP spend: $"+e.value.totalIapSpend.toFixed(2),noUnderline:""},{default:t(()=>[y(d,{class:"tw-text-neutral-500",icon:"money-check-alt",size:"sm"})],void 0,!0),_:2},1032,["content"])):c("",!0),e.value?.isDeveloper?(i(),o(r(f),{key:1,content:"This player is a developer.",noUnderline:""},{default:t(()=>[y(d,{class:"tw-text-neutral-500",icon:"user-astronaut",size:"sm"})],void 0,!0),_:1})):c("",!0)]),"top-right":t(()=>[l(s(e.value?.id),1)]),"bottom-left":t(()=>[l("Level "+s(e.value?.level),1)]),"bottom-right":t(()=>[l("Joined "+s(r(h)(e.value.createdAt)),1)]),default:t(()=>[l(s(e.value?.name),1)],void 0,!0),_:2},1024)):(i(),o(r(u),{key:1,class:"!tw-p-0 tw-text-red-800"},{"top-right":t(()=>[l(s(e.value?.id),1)]),"bottom-left":t(()=>a[3]||(a[3]=[l("Failed to load player!",-1)])),default:t(()=>[l("🛑 "+s(e.value?.name),1)],void 0,!0),_:2},1024)):(i(),o(r(u),{key:0,class:"!tw-p-0"},{"top-right":t(()=>[l(s(e.value?.id),1)]),"bottom-left":t(()=>a[1]||(a[1]=[l("Player not initialized!",-1)])),default:t(()=>[a[2]||(a[2]=I("span",{class:"tw-text-neutral-500"},"🚫 Uninitialized",-1))],void 0,!0),_:2,__:[2]},1024))]),_:1},8,["model-value","label"])}}});export{N as default};
