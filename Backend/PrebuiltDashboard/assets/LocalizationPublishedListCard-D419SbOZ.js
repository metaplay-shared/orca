import{d as $,bz as C,c as b,E as F,r as I,e as l,o as n,w as s,j as d,f as a,x as V,k as o,t as x,q as h,ae as A,a as r,y as w,D as g,U as y,m as p,_ as c}from"./index-DAyiym1a.js";import{M as u,a as m,b as B,c as k}from"./metaListUtils-B-xQ0HnD.js";import{_ as R}from"./LocalizationActionPublish.vue_vue_type_script_setup_true_lang-D3IATf-n.js";import{a as E}from"./localization-DDIHoN6I.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-CmGaUCkv.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-XDUxofmt.js";import"./index-CVSO09yM.js";const K={key:0},U={key:0},Z={key:1},j={key:1},q={key:0},H={key:1},W=1,st=$({__name:"LocalizationPublishedListCard",setup(z){const S=C(),D=b(()=>S.path),{data:f}=F(E()),L=b(()=>{if(f.value!==void 0)return f.value.filter(e=>e.publishedAt!==null||e.unpublishedAt!==null||e.isActive)});function T(e){const t=D.value,v=t.endsWith("/")?"":"/";return t+v+e}function N(e){return e.id}function _(e){return e.isActive?"2525-12-25T00:00:00.0000000Z":e.unpublishedAt??"1970-01-01T00:00:00.0000000Z"}const O=[new u("Time",_,m.Ascending),new u("Time",_,m.Descending),new u("Name","name",m.Ascending),new u("Name","name",m.Descending)],M=["id","name","description"],P=[new B("archived",[new k("Archived",e=>e.isArchived),new k("Not archived",e=>!e.isArchived,!0)])];return(e,t)=>{const v=I("meta-list-card");return n(),l(v,{title:"Publish History",itemList:L.value,getItemKey:N,searchFields:M,filterSets:P,sortOptions:O,defaultSortOption:W,icon:"language","data-testid":"localization-published-list-card"},{"item-card":s(({item:i})=>[d(a(V),null,{badge:s(()=>[i.isActive?(n(),l(a(c),{key:0,variant:"success"},{default:s(()=>t[0]||(t[0]=[o("Active",-1)]),void 0,!0),_:1,__:[0]})):p("",!0),i.isArchived?(n(),l(a(c),{key:1,variant:"neutral"},{default:s(()=>t[1]||(t[1]=[o("Archived",-1)]),void 0,!0),_:1,__:[1]})):p("",!0),i.bestEffortStatus==="Failed"?(n(),l(a(c),{key:2,variant:"danger"},{default:s(()=>t[2]||(t[2]=[o("Failed",-1)]),void 0,!0),_:1,__:[2]})):p("",!0)]),"top-right":s(()=>[i.isActive?(n(),r("div",K,[i.publishedAt!=null?(n(),r("div",U,[t[3]||(t[3]=o("Published ",-1)),d(a(w),{instant:a(g).fromISO(i.publishedAt)},null,8,["instant"])])):(n(),r("div",Z,[d(a(y),{content:"The date was not recorded as it was published in an earlier version."},{default:s(()=>t[4]||(t[4]=[o("Date unavailable",-1)]),void 0,!0),_:1,__:[4]})]))])):(n(),r("div",j,[i.unpublishedAt!=null?(n(),r("div",q,[t[5]||(t[5]=o("Unpublished ",-1)),d(a(w),{instant:a(g).fromISO(i.unpublishedAt)},null,8,["instant"])])):(n(),r("div",H,[d(a(y),{content:"The date was not recorded as it was unpublished in an earlier version."},{default:s(()=>t[6]||(t[6]=[o("Date unavailable",-1)]),void 0,!0),_:1,__:[6]})]))]))]),"bottom-right":s(()=>[h("div",null,[d(a(A),{to:`localizations/diff?newRoot=${i.id}`,"disabled-tooltip":i.isActive?"The active localization cannot be compared to itself.":void 0,"data-testid":"diff-localization"},{default:s(()=>t[7]||(t[7]=[o("Diff to active",-1)]),void 0,!0),_:2,__:[7]},1032,["to","disabled-tooltip"])]),h("div",null,[d(a(A),{to:T(i.id),"data-testid":"view-localization"},{default:s(()=>t[8]||(t[8]=[o("View localization",-1)]),void 0,!0),_:2,__:[8]},1032,["to"])]),d(R,{localizationId:i.id,"text-button":""},null,8,["localizationId"])]),default:s(()=>[o(x(i.name||"No Name Available"),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}}});export{st as default};
