import{d as y,E as _,h as r,c as S,r as M,a as w,o as k,j as i,w as s,f as o,q as x,k as V,bs as h,bt as N}from"./index-DAyiym1a.js";import{a as I}from"./players-CkgXyjra.js";import{_ as C}from"./MetaLanguageLabel.vue_vue_type_script_setup_true_lang-DNwLaJf6.js";import{_ as $}from"./MetaGeneratedForm.vue_vue_type_script_setup_true_lang-DdaVgxEJ.js";import{_ as A}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CRnsCPt_.js";import"./utils-DSYdgMhH.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-BiTvhFwY.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-D6xsoOzq.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-CmGaUCkv.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-XDUxofmt.js";import"./index-CVSO09yM.js";const B={class:"tw-mr-32 tw-text-xs+ tw-text-neutral-500"},H=y({__name:"PlayerActionSendMail",props:{playerId:{}},setup(d){const m=d,p=h(),{data:e,refresh:u}=_(I(m.playerId)),t=r({}),l=r(!1);function c(){t.value={},l.value=!1}const f=S(()=>t.value?l.value?void 0:"Some fields contain invalid data. Check that the fields are filled in correctly to proceed.":"Fill in the required fields to proceed."),{showSuccessNotification:g}=N();async function v(){await p.post(`/players/${e.value.id}/sendMail`,t.value),g(`In-game mail sent to ${e.value.model.playerName||"n/a"}.`),u()}return(G,a)=>{const b=M("fa-icon");return k(),w("div",null,[i(o(A),{"trigger-button-disabled-tooltip":o(e)?"":"Waiting for player data..","modal-title":"Send In-Game Mail",action:v,"trigger-button-label":"Send Mail","ok-button-label":"Send Mail","ok-button-disabled-tooltip":f.value,"confirm-permission":"api.players.mail",onShow:c,"data-testid":"action-mail"},{"action-button-icon":s(()=>[i(b,{class:"mr-2",icon:"paper-plane"})]),"modal-subtitle":s(()=>[x("span",B,[a[2]||(a[2]=V("Player's language: ",-1)),i(C,{language:o(e).model.language,variant:"badge"},null,8,["language"])])]),default:s(()=>[i($,{class:"!tw-overflow-x-hidden",modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=n=>t.value=n),typeName:"Metaplay.Core.InGameMail.MetaInGameMail",forcedLocalization:o(e).model.language,page:"PlayerActionSendMail","logic-version":o(e).model.logicVersion,onStatus:a[1]||(a[1]=n=>l.value=n)},null,8,["modelValue","forcedLocalization","logic-version"])]),_:1},8,["trigger-button-disabled-tooltip","ok-button-disabled-tooltip"])])}}});export{H as default};
