import{d as $,bz as x,c as A,E as F,c9 as I,r as V,e as l,o as n,w as s,j as d,f as a,x as B,k as o,t as m,q as _,ae as w,a as r,m as u,ad as G,y,D as S,U as k,_ as b}from"./index-DAyiym1a.js";import{M as c,a as v,b as E,c as D}from"./metaListUtils-B-xQ0HnD.js";import{_ as W}from"./GameConfigActionPublish.vue_vue_type_script_setup_true_lang-CvsnSxav.js";import"./MInputSingleSelectRadio.vue_vue_type_script_setup_true_lang-CGM7lb3s.js";import"./index-TQG-La0y.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-CmGaUCkv.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-XDUxofmt.js";import"./index-CVSO09yM.js";const K={key:0},U={key:0},Z={key:1},j={key:1},q={key:0},z={key:1},H={key:0,class:"tw-text-orange-500"},J=1,ot=$({__name:"GameConfigPublishedListCard",setup(Q){const L=x(),N=A(()=>L.path),{data:f}=F(I()),T=A(()=>{if(f.value!==void 0)return f.value.filter(i=>i.publishedAt!==null||i.unpublishedAt!==null||i.isActive)});function O(i){const t=N.value,p=t.endsWith("/")?"":"/";return t+p+i}function P(i){return i.id}function h(i){return i.isActive?"2525-12-25T00:00:00.0000000Z":i.unpublishedAt??"1970-01-01T00:00:00.0000000Z"}const g=[new c("Time",h,v.Ascending),new c("Time",h,v.Descending),new c("Name","name",v.Ascending),new c("Name","name",v.Descending)],M=["id","name","description"],R=[new E("archived",[new D("Archived",i=>i.isArchived),new D("Not archived",i=>!i.isArchived,!0)])];return(i,t)=>{const p=V("meta-list-card");return n(),l(p,{title:"Publish History",itemList:T.value,getItemKey:P,searchFields:M,filterSets:R,sortOptions:g,defaultSortOption:J,icon:"table","data-testid":"game-config-published-list-card"},{"item-card":s(({item:e})=>[d(a(B),null,{badge:s(()=>[e.isActive?(n(),l(a(b),{key:0,variant:"success"},{default:s(()=>t[0]||(t[0]=[o("Active",-1)]),void 0,!0),_:1,__:[0]})):u("",!0),e.isArchived?(n(),l(a(b),{key:1,variant:"neutral"},{default:s(()=>t[1]||(t[1]=[o("Archived",-1)]),void 0,!0),_:1,__:[1]})):u("",!0),e.bestEffortStatus==="Failed"?(n(),l(a(b),{key:2,variant:"danger"},{default:s(()=>t[2]||(t[2]=[o("Failed",-1)]),void 0,!0),_:1,__:[2]})):u("",!0)]),"top-right":s(()=>[e.isActive?(n(),r("div",K,[e.publishedAt!=null?(n(),r("div",U,[t[3]||(t[3]=o("Published ",-1)),d(a(y),{instant:a(S).fromISO(e.publishedAt)},null,8,["instant"])])):(n(),r("div",Z,[d(a(k),{content:"The date was not recorded as it was published in an earlier version."},{default:s(()=>t[4]||(t[4]=[o("Date unavailable",-1)]),void 0,!0),_:1,__:[4]})]))])):(n(),r("div",j,[e.unpublishedAt!=null?(n(),r("div",q,[t[5]||(t[5]=o("Unpublished ",-1)),d(a(y),{instant:a(S).fromISO(e.unpublishedAt)},null,8,["instant"])])):(n(),r("div",z,[d(a(k),{content:"The date was not recorded as it was unpublished in an earlier version."},{default:s(()=>t[6]||(t[6]=[o("Date unavailable",-1)]),void 0,!0),_:1,__:[6]})]))]))]),"bottom-left":s(()=>[e.buildReportSummary?.totalLogLevelCounts.Warning?(n(),r("div",H,m(a(G)(e.buildReportSummary.totalLogLevelCounts.Warning,"build warning",!0)),1)):u("",!0),_("div",null,m(e.description||"No description available"),1)]),"bottom-right":s(()=>[_("div",null,[d(a(w),{to:`gameConfigs/diff?newRoot=${e.id}`,"disabled-tooltip":e.isActive?"The active game config cannot be compared to itself.":void 0,"data-testid":"diff-config"},{default:s(()=>t[7]||(t[7]=[o("Diff to active",-1)]),void 0,!0),_:2,__:[7]},1032,["to","disabled-tooltip"])]),_("div",null,[d(a(w),{to:O(e.id),"data-testid":"view-config"},{default:s(()=>t[8]||(t[8]=[o("View config",-1)]),void 0,!0),_:2,__:[8]},1032,["to"])]),d(W,{gameConfigId:e.id,"text-button":""},null,8,["gameConfigId"])]),default:s(()=>[o(m(e.name||"No Name Available"),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}}});export{ot as default};
