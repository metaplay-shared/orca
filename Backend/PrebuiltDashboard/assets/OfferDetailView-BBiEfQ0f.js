import{d as V,bz as B,c5 as R,E as I,c,r as _,e as d,o as f,w as t,j as i,f as l,x as q,I as E,q as g,_ as j,k as a,t as u,ae as z,m as W,U as v,ad as y}from"./index-DAyiym1a.js";import{a as k}from"./numberUtils-CkF0oMe2.js";import{M as b,a as x,b as H,c as N}from"./metaListUtils-B-xQ0HnD.js";import{r as J}from"./rewardUtils-C0-L1SL8.js";import{_ as K}from"./PlayerConditionsCard.vue_vue_type_script_setup_true_lang-PGq7Swp1.js";import{_ as Q}from"./SegmentsCard.vue_vue_type_script_setup_true_lang-DDVrumlj.js";import{b as X}from"./offers-BeA4zLjL.js";import{_ as Y}from"./MTabLayout.vue_vue_type_script_setup_true_lang-xoFAviVR.js";import{_ as O}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-CLb4mfLH.js";import{M as Z}from"./MSingleColumnLayout-CUJDqBPP.js";import{_ as h}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Q1r46_CP.js";import{_ as tt,a as et}from"./MViewContainer.vue_vue_type_script_setup_true_lang-DP4T6epC.js";import"./MetaAudienceSizeEstimate.vue_vue_type_script_setup_true_lang-_AvZ20hd.js";import"./MAbbreviateNumber.vue_vue_type_script_setup_true_lang-D1qNvv8f.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";const it={class:"font-weight-bold"},lt={class:"font-weight-bold tw-mb-1"},at={class:"font-weight-bold tw-mb-1"},ot={class:"tw-ml-1"},Tt=V({__name:"OfferDetailView",setup(rt){const A=B(),F=R(A.params.id),{data:r,error:G}=I(X(F)),$=c(()=>{const s=r.value.statistics.numActivatedForFirstTime,e=r.value.statistics.numPurchasedForFirstTime;return s===0?0:e/s*100}),C=c(()=>{const s=r.value.statistics.numActivatedForFirstTime,e=r.value.statistics.numPurchasedForFirstTime;return s===0?"Not activated by any players yet.":`Activated by ${k(s)} players and purchased by ${k(e)}.`}),M=c(()=>J(r.value.config.rewards??[])),U=c(()=>r.value.usedBy.map(s=>{switch(s.type){case"OfferGroup":return{type:s.type,displayName:s.displayName,icon:"tags",linkUrl:`/offerGroups/offerGroup/${s.id}`,linkText:"Offer Group"};case"Offer":return{type:s.type,displayName:s.displayName,icon:"tags",linkUrl:`/offerGroups/offer/${s.id}`,linkText:"Offer"};default:return{type:s.type,displayName:s.displayName,icon:"question-circle",linkUrl:"",linkText:""}}})),L=[new b("Type","type",x.Ascending),new b("Type","type",x.Descending),new b("Name","displayName",x.Ascending),new b("Name","displayName",x.Descending)],D=c(()=>[new H("type",[new N("Offer Groups",s=>s.type==="OfferGroup"),new N("Offers",s=>s.type==="Offer")].sort((s,e)=>{const p=s.displayName.toUpperCase(),o=e.displayName.toUpperCase();return p<o?-1:p>o?1:0}))]);return(s,e)=>{const p=_("fa-icon"),o=_("b-td"),n=_("b-tr"),w=_("b-tbody"),P=_("b-table-simple"),S=_("meta-reward-badge"),T=_("meta-list-card");return f(),d(l(et),{"is-loading":!l(r),error:l(G),permission:"api.activables.view","full-width":""},{overview:t(()=>[i(l(tt),{id:l(r).config.offerId,title:l(r).config.displayName,subtitle:l(r).config.description,"data-testid":"offer-detail-overview-card"},{default:t(()=>[g("span",it,[i(p,{icon:"chart-bar"}),e[0]||(e[0]=a(" Overview",-1))]),i(P,{small:"",responsive:""},{default:t(()=>[i(w,null,{default:t(()=>[i(n,null,{default:t(()=>[i(o,null,{default:t(()=>e[1]||(e[1]=[a("In App Product",-1)]),void 0,!0),_:1,__:[1]}),l(r).config.inAppProduct!==null?(f(),d(o,{key:0,class:"text-right"},{default:t(()=>[a(u(l(r).config.inAppProduct),1)],void 0,!0),_:1})):(f(),d(o,{key:1,class:"text-right text-muted tw-italic"},{default:t(()=>e[2]||(e[2]=[a("None",-1)]),void 0,!0),_:1,__:[2]}))],void 0,!0),_:1}),l(r).referencePrice!==null?(f(),d(n,{key:0},{default:t(()=>[i(o,null,{default:t(()=>e[3]||(e[3]=[a("Reference Price",-1)]),void 0,!0),_:1,__:[3]}),i(o,{class:"text-right"},{default:t(()=>[a(u(l(r).referencePrice),1)],void 0,!0),_:1})],void 0,!0),_:1})):W("",!0)],void 0,!0),_:1})],void 0,!0),_:1}),g("div",lt,[i(p,{icon:"times"}),e[4]||(e[4]=a(" Limits",-1))]),i(P,{small:"",responsive:""},{default:t(()=>[i(w,null,{default:t(()=>[i(n,null,{default:t(()=>[i(o,null,{default:t(()=>e[5]||(e[5]=[a("Max Activations",-1)]),void 0,!0),_:1,__:[5]}),l(r).config.maxActivationsPerPlayer===null?(f(),d(o,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>e[6]||(e[6]=[a("Unlimited",-1)]),void 0,!0),_:1,__:[6]})):(f(),d(o,{key:1,class:"text-right"},{default:t(()=>[a(u(l(r).config.maxActivationsPerPlayer),1)],void 0,!0),_:1}))],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>e[7]||(e[7]=[a("Max Total Purchases",-1)]),void 0,!0),_:1,__:[7]}),l(r).config.maxPurchasesPerPlayer===null?(f(),d(o,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>e[8]||(e[8]=[a("Unlimited",-1)]),void 0,!0),_:1,__:[8]})):(f(),d(o,{key:1,class:"text-right"},{default:t(()=>[a(u(l(r).config.maxPurchasesPerPlayer),1)],void 0,!0),_:1}))],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>e[9]||(e[9]=[a("Max Total Purchases Per Offer Group",-1)]),void 0,!0),_:1,__:[9]}),l(r).config.maxPurchasesPerOfferGroup===null?(f(),d(o,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>e[10]||(e[10]=[a("Unlimited",-1)]),void 0,!0),_:1,__:[10]})):(f(),d(o,{key:1,class:"text-right"},{default:t(()=>[a(u(l(r).config.maxPurchasesPerOfferGroup),1)],void 0,!0),_:1}))],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>e[11]||(e[11]=[a("Max Purchases Per Activation",-1)]),void 0,!0),_:1,__:[11]}),l(r).config.maxPurchasesPerActivation===null?(f(),d(o,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>e[12]||(e[12]=[a("Unlimited",-1)]),void 0,!0),_:1,__:[12]})):(f(),d(o,{key:1,class:"text-right"},{default:t(()=>[a(u(l(r).config.maxPurchasesPerActivation),1)],void 0,!0),_:1}))],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1}),g("div",at,[i(p,{icon:"chart-line"}),e[13]||(e[13]=a(" Statistics",-1))]),i(P,{small:"",responsive:""},{default:t(()=>[i(w,null,{default:t(()=>[i(n,null,{default:t(()=>[i(o,null,{default:t(()=>[i(l(v),{content:"Total value across all offer groups."},{default:t(()=>e[14]||(e[14]=[a("Global",-1)]),void 0,!0),_:1,__:[14]}),e[15]||(e[15]=a(" Seen by",-1))],void 0,!0),_:1,__:[15]}),i(o,{class:"text-right"},{default:t(()=>[a(u(l(y)(l(r).statistics.numActivatedForFirstTime,"player",!0)),1)],void 0,!0),_:1})],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>[i(l(v),{content:"Total value across all offer groups."},{default:t(()=>e[16]||(e[16]=[a("Global",-1)]),void 0,!0),_:1,__:[16]}),e[17]||(e[17]=a(" Purchased by",-1))],void 0,!0),_:1,__:[17]}),i(o,{class:"text-right"},{default:t(()=>[a(u(l(y)(l(r).statistics.numPurchasedForFirstTime,"player",!0)),1)],void 0,!0),_:1})],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>[i(l(v),{content:"Total value across all offer groups."},{default:t(()=>e[18]||(e[18]=[a("Global",-1)]),void 0,!0),_:1,__:[18]}),e[19]||(e[19]=a(" Conversion",-1))],void 0,!0),_:1,__:[19]}),i(o,{class:"text-right"},{default:t(()=>[i(l(v),{content:C.value},{default:t(()=>[a(u($.value.toFixed(0))+"%",1)],void 0,!0),_:1},8,["content"])],void 0,!0),_:1})],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>[e[21]||(e[21]=a("Total ",-1)),i(l(v),{content:"Total value across all offer groups."},{default:t(()=>e[20]||(e[20]=[a("Global",-1)]),void 0,!0),_:1,__:[20]}),e[22]||(e[22]=a(" Seen Count",-1))],void 0,!0),_:1,__:[21,22]}),i(o,{class:"text-right"},{default:t(()=>[a(u(l(y)(l(r).statistics.numActivated,"time",!0)),1)],void 0,!0),_:1})],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>[e[24]||(e[24]=a("Total ",-1)),i(l(v),{content:"Total value across all offer groups."},{default:t(()=>e[23]||(e[23]=[a("Global",-1)]),void 0,!0),_:1,__:[23]}),e[25]||(e[25]=a(" Purchased Count",-1))],void 0,!0),_:1,__:[24,25]}),i(o,{class:"text-right"},{default:t(()=>[a(u(l(y)(l(r).statistics.numPurchased,"time",!0)),1)],void 0,!0),_:1})],void 0,!0),_:1}),i(n,null,{default:t(()=>[i(o,null,{default:t(()=>[e[27]||(e[27]=a("Total ",-1)),i(l(v),{content:"Total value across all offer groups."},{default:t(()=>e[26]||(e[26]=[a("Global",-1)]),void 0,!0),_:1,__:[26]}),e[28]||(e[28]=a(" Revenue",-1))],void 0,!0),_:1,__:[27,28]}),i(o,{class:"text-right"},{default:t(()=>[a("$"+u(l(r).statistics.revenue.toFixed(2)),1)],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1},8,["id","title","subtitle"])]),default:t(()=>[i(l(Y),{tabs:[{label:"Configuration"},{label:"Targeting"}]},{"tab-0":t(()=>[i(l(O),null,{default:t(()=>[i(T,{title:"Contents","item-list":M.value,"list-layout":"flex","data-testid":"offer-detail-contents-card"},{"item-card":t(m=>[i(S,{reward:m.item},null,8,["reward"])]),_:1},8,["item-list"]),i(T,{title:"Referenced by",icon:"exchange-alt","item-list":U.value,"filter-sets":D.value,"sort-options":L,"search-fields":["displayName","type"],"empty-message":"No offer groups or other offers reference this offer.","data-testid":"offer-detail-references-card"},{"item-card":t(({item:m})=>[i(l(q),null,E({default:t(()=>[i(l(j),null,{icon:t(()=>[i(p,{icon:m.icon},null,8,["icon"])]),default:t(()=>[a(u(m.type),1)],void 0,!0),_:2},1024),g("span",ot,u(m.displayName),1)],void 0,!0),_:2},[m.linkUrl?{name:"top-right",fn:t(()=>[i(l(z),{to:m.linkUrl},{default:t(()=>[a("View "+u(`${m.linkText.toLocaleLowerCase()}`),1)],void 0,!0),_:2},1032,["to"])]),key:"0"}:void 0]),1024)]),_:1},8,["item-list","filter-sets"])],void 0,!0),_:1})]),"tab-1":t(()=>[i(l(O),null,{default:t(()=>[i(Q,{segments:l(r).config.segments,"owner-title":"This offer"},null,8,["segments"]),i(K,{"player-conditions":l(r).config.additionalConditions},null,8,["player-conditions"])],void 0,!0),_:1})]),_:1}),i(l(Z),{class:"tw-max-w-6xl"},{default:t(()=>[i(l(h),{data:l(r),label:"singleOfferData"},null,8,["data"])],void 0,!0),_:1})]),_:1},8,["is-loading","error"])}}});export{Tt as default};
