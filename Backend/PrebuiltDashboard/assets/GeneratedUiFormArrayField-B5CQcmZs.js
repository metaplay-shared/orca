import{d as N,N as M,O as $,P as U,h as V,c as A,J as B,i as E,a as r,o as s,q as v,j as n,m as y,w as u,k as g,t as f,f as t,F as G,b as K,S as _,e as L,n as z,T as w,v as S}from"./index-DAyiym1a.js";import{_ as j}from"./LabelWithLogicVersion.vue_vue_type_script_setup_true_lang-BMFnsD7W.js";import{_ as q}from"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-BiTvhFwY.js";const x={class:"tw-space-y-2"},D={key:0,class:"tw-m-0 tw-text-xs tw-text-neutral-500"},H={key:0,class:"tw-p-3 tw-text-xs tw-italic tw-text-neutral-500"},J=["data-testid"],O={class:"tw-text-right"},R={class:"tw-text-right"},Y=N({__name:"GeneratedUiFormArrayField",props:{...$,value:{type:Array,default:()=>[]}},emits:M,setup(c,{emit:P}){const a=c,T=P,{displayName:l,displayHint:b,update:m}=U(a,T),p=V(),F=A(()=>{const e={...a.fieldInfo};return e.fieldName="",e.fieldType=p.value??"",e.typeKind=B.ValueCollection,e});E(()=>{if(!a.fieldInfo.typeParams)throw new Error("Array field must have type params");p.value=a.fieldInfo.typeParams[0]});function I(e,d){m(a.value.map((o,i)=>i===e?d:o))}function k(){m(a.value.concat(void 0))}function C(e){m(a.value.filter((d,o)=>e!==o))}return(e,d)=>(s(),r("div",x,[v("div",null,[n(j,{fieldInfo:e.fieldInfo,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers},{default:u(()=>[g(f(t(l)),1)],void 0,!0),_:1},8,["fieldInfo","isTargetingMultiplePlayers"]),t(b)?(s(),r("p",D,f(t(b)),1)):y("",!0)]),n(t(S),{class:"tw-bg-neutral-50",showBorder:""},{default:u(()=>[c.value.length===0?(s(),r("div",H,"No "+f(t(l)?.toLocaleLowerCase())+" added yet.",1)):y("",!0),(s(!0),r(G,null,K(c.value,(o,i)=>(s(),r("div",{class:"tw-space-y-3 tw-p-3",key:i,"data-testid":`${t(_)(t(l)??"generated-ui-field")}-form`},[p.value?(s(),L(q,z({key:0},a,{fieldInfo:F.value,value:o,fieldPath:e.fieldPath+"/"+i,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers,onInput:h=>I(i,h)}),null,16,["fieldInfo","value","fieldPath","logic-version","disabled","isTargetingMultiplePlayers","onInput"])):y("",!0),v("div",O,[n(t(w),{variant:"danger",size:"small","disabled-tooltip":e.disabled?"This button has been disabled remotely.":void 0,onClick:h=>C(i),"data-testid":"remove-button"},{default:u(()=>d[0]||(d[0]=[g("Remove",-1)]),void 0,!0),_:2,__:[0]},1032,["disabled-tooltip","onClick"])])],8,J))),128))],void 0,!0),_:1}),v("div",R,[n(t(w),{size:"small","disabled-tooltip":e.disabled?"This button has been disabled remotely.":void 0,onClick:k,"data-testid":`add-${t(_)(t(l)??"")}-button`},{default:u(()=>[g("Add "+f(t(l)),1)],void 0,!0),_:1},8,["disabled-tooltip","data-testid"])])]))}});export{Y as default};
