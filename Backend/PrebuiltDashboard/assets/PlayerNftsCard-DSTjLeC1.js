import{d as v,E as h,c as g,r as b,a,o,j as p,w as s,k as i,f as r,ae as c,x as k,t as n,bt as I,bs as S}from"./index-DAyiym1a.js";import{a as T}from"./players-CkgXyjra.js";const F={key:0},$={key:1,class:"tw-italic"},x={key:0},C={key:1,class:"tw-italic"},A=v({__name:"PlayerNftsCard",props:{playerId:{}},setup(u){const f=S(),l=u,{data:d,refresh:y}=h(T(l.playerId)),_=g(()=>d.value?.nfts),{showSuccessNotification:m}=I();async function w(){m("NFT ownership update triggered. It might take a few moments."),await f.post(`players/${l.playerId}/refreshOwnedNfts`),m("NFT ownerships updated."),y()}return(U,t)=>{const N=b("meta-list-card");return o(),a("div",null,[p(N,{class:"mt-2",title:"NFTs",icon:"cubes",tooltip:`Shows NFTs owned by ${r(d).model.playerName||"n/a"}.`,itemList:_.value,emptyMessage:`${r(d).model.playerName||"n/a"} doesn't have any NFTs.`,permission:"api.players.view","data-testid":"player-nfts-card"},{"item-card":s(({item:e})=>[p(r(k),{avatarUrl:e.imageUrl},{"top-right":s(()=>[i(n(e.collectionId)+"/"+n(e.tokenId),1)]),"bottom-left":s(()=>[e.description?(o(),a("div",x,n(e.description),1)):(o(),a("span",C,"No description."))]),"bottom-right":s(()=>[p(r(c),{permission:"api.nft.view",to:`/web3/nft/${e.collectionId}/${e.tokenId}`,"data-testid":"view-nft"},{default:s(()=>t[0]||(t[0]=[i("View NFT",-1)]),void 0,!0),_:2,__:[0]},1032,["to"])]),default:s(()=>[e.name?(o(),a("span",F,n(e.name),1)):(o(),a("span",$,"Unnamed "+n(e.typeName),1))],void 0,!0),_:2},1032,["avatarUrl"])]),description:s(()=>[t[2]||(t[2]=i("NFT ownerships update automatically but you can also ",-1)),p(r(c),{permission:"api.nft.refresh_from_ledger",onClick:w,"data-testid":"nft-refresh-button"},{default:s(()=>t[1]||(t[1]=[i("refresh now",-1)]),void 0,!0),_:1,__:[1]}),t[3]||(t[3]=i(".",-1))]),_:1},8,["tooltip","itemList","emptyMessage"])])}}});export{A as default};
