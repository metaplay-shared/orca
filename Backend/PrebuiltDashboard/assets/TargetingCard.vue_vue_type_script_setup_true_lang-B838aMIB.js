import{d as b,E as h,ck as T,c as s,b7 as $,r as M,e as m,m as x,f as o,o as g,w as t,x as v,k as n,t as l,j as _,ae as z}from"./index-DAyiym1a.js";import{M as u,a as y}from"./metaListUtils-B-xQ0HnD.js";import{_ as D}from"./MetaAudienceSizeEstimate.vue_vue_type_script_setup_true_lang-_AvZ20hd.js";const q=b({__name:"TargetingCard",props:{targetCondition:{},ownerTitle:{default:"This entity"}},setup(S){const c=S,w=$(),{data:r}=h(T()),N=["info.displayName","info.description"],A=[u.asUnsorted(),new u("Name","info.displayName",y.Ascending),new u("Name","info.displayName",y.Descending)],C=s(()=>d.value?"ALL":"ANY"),d=s(()=>c.targetCondition?.requireAllSegments),L=s(()=>c.targetCondition?.requireAnySegment),p=s(()=>d.value??L.value),k=s(()=>w.doesHavePermission("api.segmentation.view")?r.value?p.value?p.value.map(i=>{const a=r.value?.segments.find(e=>e.info.segmentId===i);return a===void 0?{missing:{segment:i}}:a}):[]:void 0:[]);return(f,i)=>{const a=M("meta-list-card");return o(r)?(g(),m(a,{key:0,title:`Segments: match ${C.value}`,icon:"user-tag",itemList:k.value,searchFields:N,sortOptions:A,emptyMessage:`${f.ownerTitle} has no targeting.`,pageSize:8,permission:"api.segmentation.view","data-testid":"targeting-card"},{"item-card":t(e=>[e.item.missing?(g(),m(o(v),{key:1},{"bottom-left":t(()=>i[1]||(i[1]=[n("This segment is missing in the currently active game config.",-1)])),default:t(()=>[n(l(e.item.missing.segment),1)],void 0,!0),_:2},1024)):(g(),m(o(v),{key:0},{"top-right":t(()=>[_(D,{sizeEstimate:e.item.sizeEstimate,small:""},null,8,["sizeEstimate"])]),"bottom-left":t(()=>[n(l(e.item.info.description),1)]),"bottom-right":t(()=>[_(o(z),{to:`/segments/${e.item.info.segmentId}`,permission:"api.segmentation.view"},{default:t(()=>i[0]||(i[0]=[n("View segment",-1)]),void 0,!0),_:2,__:[0]},1032,["to"])]),default:t(()=>[n(l(e.item.info.displayName),1)],void 0,!0),_:2},1024))]),_:1},8,["title","itemList","emptyMessage"])):x("",!0)}}});export{q as _};
