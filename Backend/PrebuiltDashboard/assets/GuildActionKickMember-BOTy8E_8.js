import{d as C,E as K,c as y,h as g,r as O,e as _,o as n,w as u,a as v,m as k,q as m,j as c,k as t,t as r,f as o,_ as b,e9 as V,bs as B,bt as j}from"./index-DAyiym1a.js";import{a as D}from"./guilds-CXgIPAfk.js";import{_ as R}from"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-BRIBVSuX.js";import{_ as A}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CRnsCPt_.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-B7AbTbVm.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-XDUxofmt.js";import"./index-CVSO09yM.js";const E={key:0},F={key:0},T={key:1,class:"tw-text-red-500"},q={key:0,class:"tw-flex tw-items-center tw-justify-between tw-text-sm"},L={class:"tw-text-neutral-400"},Y=C({__name:"GuildActionKickMember",props:{guildId:{}},setup(w){const f=w,N=B(),{data:l,refresh:h}=K(D(f.guildId)),S=y(()=>Object.keys(l.value.model.members).length!==0),s=g([]),i=g();function I(){i.value=void 0;const d=[];for(const e in l.value.model.members){if(!Object.prototype.hasOwnProperty.call(l.value.model.members,e))continue;const p=l.value.model.members[e].displayName,a=l.value.model.members[e].role;d.push({label:p,value:{playerId:e,displayName:p,roleId:a}})}s.value=d}const x=y(()=>s.value[0]?.value?.displayName),{showSuccessNotification:G}=j();async function M(){await N.post(`/guilds/${f.guildId}/kickMember`,{playerId:i.value?.playerId}),G(`${i.value?.displayName} kicked from ${l.value.model.displayName}.`),h()}const P=y(()=>l.value.model.lifecyclePhase==="Closed"?"Guild is closed.":S.value?void 0:"Guild has no members to kick.");function $(d){return d==="Leader"?"primary":"neutral"}return(d,e)=>{const p=O("meta-no-seatbelts");return n(),_(o(A),{"modal-title":"Kick a Player From the Guild",action:M,"trigger-button-label":"Kick a Member","trigger-button-disabled-tooltip":P.value,variant:"warning","ok-button-label":s.value?.length>1?"Kick Player":"Kick and Close Guild","ok-button-disabled-tooltip":i.value?void 0:`Select a member to ${s.value?.length>1?"kick out of":"kick out and close"} this guild.`,permission:"api.guilds.kick_member",onShow:I,"data-testid":"action-kick-member"},{default:u(()=>[s.value?(n(),v("div",E,[s.value.length>=2?(n(),v("p",F,[m("i",null,[t("Note: Kicking all "+r(s.value.length)+" members from ",1),c(o(b),null,{default:u(()=>[t(r(o(l).model.displayName),1)],void 0,!0),_:1}),e[1]||(e[1]=t(" will also automatically close it.",-1))])])):(n(),v("p",T,[m("i",null,[e[2]||(e[2]=t("Note: ",-1)),c(o(b),{variant:"danger"},{default:u(()=>[t(r(x.value),1)],void 0,!0),_:1}),e[3]||(e[3]=t(" is the last player in ",-1)),c(o(b),null,{default:u(()=>[t(r(o(l).model.displayName),1)],void 0,!0),_:1}),e[4]||(e[4]=t(" and kicking them will also close the guild.",-1))])])),e[5]||(e[5]=m("div",{class:"tw-my-2 tw-font-semibold"},"Select a Guild Member",-1)),c(o(R),{"model-value":i.value,options:s.value,placeholder:"Select a player...",searchFields:["playerId","displayName"],"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a)},{option:u(({option:a})=>[a.value?(n(),v("div",q,[m("span",null,[t(r(a.value.displayName)+" ",1),c(o(b),{variant:$(a.value.roleId)},{default:u(()=>[t(r(o(V)(a.value.roleId)),1)],void 0,!0),_:2},1032,["variant"])]),m("span",L,r(a.value.playerId),1)])):k("",!0)]),_:1},8,["model-value","options"]),i.value?(n(),_(p,{key:2,class:"tw-mt-4",name:i.value.displayName},null,8,["name"])):k("",!0)])):k("",!0)],void 0,!0),_:1},8,["trigger-button-disabled-tooltip","ok-button-label","ok-button-disabled-tooltip"])}}});export{Y as default};
